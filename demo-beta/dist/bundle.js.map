{"version":3,"sources":["webpack:///webpack/bootstrap 45f99215d4b40b58c9dd","webpack:///./js/liveSDK.js","webpack:///./js/playbackSDK.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","DELAY_TIME","DWDpc","DocModeType","NormalMode","FreeMode","dpc","fastMode","init","this","Dpc","appendDrawPanel","dp","MobileLive","isMobile","$","parent","append","remove","window","on_cc_live_db_flip","pageChange","pc","animationChange","ac","history","h","draw","clear","reload","setDocMode","t","setFreeDocMode","getDocs","callback","DWLive","roomid","userid","changePageTo","dId","pI","option","trim","viewername","viewertoken","forcibly","viewercustomua","language","viewercustominfo","ua","viewerid","upid","_this","scripts","length","push","hasFlash","navigator","appVersion","indexOf","ActiveXObject","e","plugins","isSupportFlash","onNotSupportFlash","lpph","LivePlayer","id","height","lppw","width","css","lpdh","lpdw","margin-left","margin-top","setInterval","show","loadScript","login","History","DrawingBoard","config","fn","ajax","url","type","dataType","data","success","isHttps","location","protocol","host","datas","pusherNode","primary","split","port","parseInt","isNaN","httpsPort","document","pusher","nsp","key","viewer","Pusher","options","pusherUrl","isBan","room","liveid","liveId","upId","multiQuality","documentDisplayMode","liveCountdown","val","delay","delayTime","foreignPublish","openHostMode","dvr","barrageData","barrage","warmVideoId","encryptWarmVideoId","playerBackgroundImageUri","replace","backgroundImageUri","playerBackgroundHint","backgroundHint","announcement","onAnnouncementShow","desc","onLiveDesc","count","showUserCount","marquee","getMarquee","onLoginSuccess","time","live","onLiveTime","template","Qa","sendPublicChatMsg","sendPrivateChatMsg","Chat","DrawPanel","sendQuestionMsg","onLoginError","logout","timeout","xhrFields","withCredentials","error","xhr","status","getScript","readyState","script","createElement","src","onload","onreadystatechange","body","appendChild","res","_res","queue","fs","cb","shift","changeNickname","socket","emit","msg","touserid","tousername","Date","getHours","getMinutes","getSeconds","j","fromuserid","fromusername","JSON","stringify","content","action","value","userId","userName","color","newm","txt","getLine","changeLine","line","onlyAudio","setSound","answerRollcall","rid","pid","rollcallId","publisherId","replyVote","voteid","voteId","voteOption","docBarrage","openBarrage","b","showControl","livePlayerInit","openSound","closeSound","docAdapt","adapt","requestInteraction","interaction","hangupInteraction","enterInteractionRoom","err","undefined","sendInteractionMessage","toId","event","video","fromname","fromid","fromrole","toid","showMarquee","showMarqueeDoc","submitQuestionnaire","_data","callBack","params","questionnaireid","questionnaireId","answers","subjectsAnswer","console","log","errorCode","result","getPublishingQuestionnaire","onQuestionnairePublish","maxMessageCount","roomId","livePlayerId","drawPanel","drawjson","pagechangedata","io","connect","query","sessionid","platform","terminal","bind","on","parse","on_cc_live_dw_page_change","onPageChange","obj","docId","docid","docName","fileName","docTotalPage","totalPage","pageNum","page","onChangeNickname","on_cc_live_dw_animation_change","on_cc_live_dw_draw","onUserCountMessage","isPublishing","start","onLiveStart","end","onLiveEnd","disconnect","onKickOut","isIPad","isIPhone","isAndroid","isWindowsPhone","getFlash","_kickOff","toJson","onAnnouncementRelease","onAnnouncementRemove","onStartRollCall","onStartLottery","onWinLottery","onStopLottery","onStartVote","onStopVote","onVoteResult","ban","banLive","onBanStream","unban","unbanLive","onUnBanStream","onRoomSetting","on_cc_live_accept_interaction","on_cc_live_interaction_message","on_cc_live_interaction_chatusers","on_cc_live_interaction_disconnect","onBroadcastMsg","onQaPublish","onQuestionnairePublishStop","onQuestionnairePublishStatis","onOnlineTeachers","onExternalQuestionnairePublish","onBanChat","onUnBanChat","onSwitchSource","setTimeout","viewerId","viewerName","cancelRequestInteraction","debug","swfUrl","isReady","flashvars","warmvideoid","openhostmode","countDownTime","openMultiQuality","buffer","swfobject","embedSWF","allowFullscreen","allowScriptAccess","wmode","getObjectById","getPlayerTime","_time","text-align","font-size","line-height","html","_streamStart","_streamEnd","_jsTOASbarrage","lines","_onlyAudio","_SetSound","_onSound","_unSound","_barrage","_ShowControl","_banLive","_unbanLive","_showMarqueePlugin","_onStart","isProcessing","getWidth","getHeight","getSwf","swf","draws","js","jstr","drawList","filp","displayMode","jj","u","animationFilp","animation","showMarqueeLight","pageChanges","animations","isHistoryReady","meta","answer","questions","question","broadcasts","broadcast","ii","encryptId","questionUserId","onQuestion","questionUserName","isPublish","triggerTime","userAvatar","onAnswer","questionId","isPrivate","answerUserId","answerUserName","chatLogs","chatLog","cls","username","userrole","userRole","useravatar","usercustommark","userCustomMark","onPublicChatMessage","idx","sort","p1","p2","lastPage","pop","encryptDocId","useSDK","lastAnimation","step","opts","PeerConnection","webkitPeerConnection00","webkitRTCPeerConnection","mozRTCPeerConnection","URL","webkitURL","msURL","oURL","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","nativeRTCIceCandidate","mozRTCIceCandidate","RTCIceCandidate","nativeRTCSessionDescription","mozRTCSessionDescription","RTCSessionDescription","usersPcs","local","audio","isRequesting","setRequestTimeoutTimer","createLocalMedia","on_cc_live_interaction_error","setCallingTimer","interactionTime","interactionTimeInterval","on_cc_live_interaction_interval","clearCallingTimer","clearInterval","REQUEST_INTERACTION_TIMEOUT","stopLocalStream","hide","on_cc_live_interaction_request_timeout","clearRequestTimeoutTimer","clearTimeout","stream","getTracks","forEach","track","stop","cancelInteraction","on_cc_live_interaction_cancal","disconnectInteraction","uId","each","up","close","isInteractioning","createLocalAudioAndVideoMedia","that","createLocalAudioMedia","on_cc_live_interaction_local_media","iceServers","credential","createAnswerPeerConnection","chatuser","addStream","onaddstream","on_cc_live_interaction_remote_media","createAnswer","setLocalDescription","onicecandidate","candidate","user","createOfferPeerConnection","oniceconnectionstatechange","iceConnectionState","disconnectid","createOffer","isSupportInteraction","on_drampanel_ready","initDrawPanelInfo","ppc","animationJ","ppcJ","getDeltaTime","db","onNotification","onInformation","onPrivateChatMessage","onPrivateAnswer","onCustomChatMessage","onQuestionSend","onAnswerSend","Event","target","eventType","handle","addEventListener","addEvents","attachEvent","arguments","m3u8","secureHosts","audioM3u8","audioSecureHosts","appendVideo","onLiveStarting","vd","index","removeEventListener","v","getElementById","report","ReportLog","stopTimer","appendDoc","img","find","attr","play","Audio","userAgent","match","on_cc_live_interaction_accept","role","isMainSpeaker","fromId","fromName","setRemoteDescription","receivedAnswer","hasAddIce","RTCICE","addIceCandidate","ice","_swfInit","on_cc_live_player_ready","_swfOk","on_cc_swf_loading_completed","Socket","chat","sessionId","substepRequest","tryCount","retryLimit","done","textStatus","errorThrown","param","recordid","recordId","sub","globalData","requestLoginData","requestInfoData","requestDrawData","requestChatqaData","allRequests","on_cc_login_error","checkout","concatMeta","on_cc_request_draw_error","on_cc_request_chatqa_error","on_cc_request_info_error","d1","d2","extend","substepRequestHistoryData","encryptLiveId","on_cc_callback_player","encryptRecordvideoId","DW","isH5play","pages","imgUrl","on_cc_callback_pages","on_cc_live_broadcast_msg","on_cc_live_qa_question","questionUserAvatar","on_cc_live_qa_answer","answerUserAvatar","answerUserRole","on_cc_live_chat_msg","CHATLOGS","cc_live_callback_chat_interval","BROADCASTS","cc_live_callback_broadcasts_interval","on_cc_h5_player_load","callbackPlayer","onCCH5PlayerLoad","playbackPanel","Callback","playerId","pageChangeIndex","drawIndex","animationIndex","intervalNum","interval","ft","pidex","a","on_cc_callback_page_change","on_cc_callback_pagechange","dc","intervalPainting","chatMessageCache","cache","lastTimeRefresh","getTime","INTERVAL_TIME","refresh","ableRefresh","Math","min","on_cc_live_chat_msg_sync","broadcastCache","on_cc_live_broadcast_msg_sync","videoId","isShowBar","setFastMode","canPlayType","vidTest","oggTest","h264Test","checkVideo","scriptArray","splice","playbackRate","seek","getDuration","getBuffer","setVolume","getVolume","setZScale","getZScale","setScale","getScale","openSettingPanel","isLivePlayerReady","currentTime","cl","bc","videoid","flashPlayerInit","parseFloat","getH5player","getPosition","duration","buffered","getBufferLength","volume","isPlay","pauseState","pause","on_cc_live_player_init","on_cc_live_player_load","seekStart","seekComplete","ds","slice","dcdatas","pvdefault","playurl","secureplayurl","playbackPlayer","removeAttribute","isMobie","on_player_start","on_spark_player_resume","on_spark_player_pause","on_spark_player_end","floor","jQuery"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 45f99215d4b40b58c9dd","/**\n * CC live video\n * v2.6.0 2018/10/15\n */\n(function () {\n\n    var DELAY_TIME = 10 * 1000;\n\n    function isSupportFlash() {\n        var isIE = (navigator.appVersion.indexOf('MSIE') >= 0);\n        var hasFlash = true;\n\n        if (isIE) {\n            try {\n                var objFlash = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');\n            } catch (e) {\n                hasFlash = false;\n            }\n        } else {\n            if (!navigator.plugins['Shockwave Flash']) {\n                hasFlash = false;\n            }\n        }\n        return hasFlash;\n    }\n\n    var DWDpc = {\n        DocModeType: {NormalMode: 0, FreeMode: 1},//设置文档为自由模式或者为跟随模式（0为跟随，1为自由）\n        dpc: {},\n        fastMode: false,\n        init: function () {\n            this.dpc = new Dpc();\n        },\n        appendDrawPanel: function () {\n            var dp = '<iframe id=\"dpa\" allow-scripts allowfullscreen allowusermedia frameborder=\"0\" style=\"width: 100%;height:100%;\"></iframe>';\n            if (MobileLive.isMobile() == 'isMobile') {\n                dp = '<iframe id=\"dpa\" allow-scripts allowfullscreen allowusermedia frameborder=\"0\" style=\"width: 100%;height:100%;pointer-events: none;\"></iframe>';\n            }\n            $('#drawPanel').parent().append(dp);\n            $('div#drawPanel').remove();\n\n            if (typeof window.on_cc_live_db_flip === 'function') {\n                window.on_cc_live_db_flip();\n            }\n        },\n        pageChange: function (pc) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.pageChange(pc);\n        },\n        animationChange: function (ac) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.animationChange(ac);\n        },\n        history: function (h) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.history(h);\n        },\n        draw: function (d) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.draw(d);\n        },\n        clear: function () {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.clear();\n        },\n        reload: function () {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.reload();\n        },\n        setDocMode: function (t) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.setFreeDocMode(t);\n        },\n        getDocs: function (callback) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.getDocs(DWLive.roomid, DWLive.userid, callback);\n        },\n        changePageTo: function (dId, pI) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.changePageTo(dId, pI);\n        }\n    };\n\n    var DWLive = {\n        DocModeType: {NormalMode: 0, FreeMode: 1},//设置文档为自由模式或者为跟随模式（0为跟随，1为自由）\n        init: function (option) {\n            if (typeof option == 'undefined') {\n                option = {};\n            }\n            this.userid = $.trim(option.userid);\n            this.roomid = $.trim(option.roomid);\n            this.viewername = $.trim(option.viewername);\n            this.viewertoken = $.trim(option.viewertoken);\n            this.forcibly = $.trim(option.forcibly);\n            this.viewercustomua = $.trim(option.viewercustomua);\n            this.language = $.trim(option.language);\n            this.viewercustominfo = $.trim(option.viewercustominfo);\n            this.ua = $.trim(option.ua);\n            this.viewerid = $.trim(option.viewerid);\n            this.upid = $.trim(option.upid);\n            if (typeof option.fastMode == 'string') {\n                if (option.fastMode === 'false') {\n                    this.fastMode = false;\n                } else {\n                    this.fastMode = true;\n                }\n            } else if (typeof option.fastMode == 'boolean') {\n                this.fastMode = option.fastMode;\n            } else {\n                this.fastMode = false;\n            }\n            DWDpc.fastMode = this.fastMode;\n\n            var _this = this;\n            var scripts = [\n                '//static.csslcloud.net/js/socket.io.js',\n                '//static.csslcloud.net/js/report.js'\n            ];\n\n            if (MobileLive.isMobile() == 'isMobile') {\n                if ($('#drawPanel').length > 0) {\n                    //启动极速动画模式\n                    if (!DWDpc.fastMode) {\n                        scripts.push('//static.csslcloud.net/js/module/drawingBoard-2.0.0.js');\n                    }\n                }\n            } else {\n                if (!isSupportFlash()) {\n\n                    if (typeof DWLive.onNotSupportFlash === 'function') {\n                        DWLive.onNotSupportFlash();\n                    }\n\n                    if (this.userid == '18452D400D6B81D5') {\n                        var lpph = $('#' + LivePlayer.id).parent().height();\n                        var lppw = $('#' + LivePlayer.id).parent().width();\n\n                        var tip = '<div style=\"z-index: 999999;\"><p style=\"color: #0e0e0e; width: 260px;\">您还没有安装flash播放器,请点击'\n                            + '<a href=\"http://www.adobe.com/go/getflash\" style=\"color: red;\" target=\"_blank\">这里'\n                            + '</a>安装</p></div>';\n\n                        $('#' + LivePlayer.id).append(tip).parent().css('z-index', '999999');\n\n                        var lpdh = $($('#' + LivePlayer.id + ' div p')[0]).height();\n                        var lpdw = $($('#' + LivePlayer.id + ' div p')[0]).width();\n\n                        $('#' + LivePlayer.id + ' div').css({\n                            'margin-left': ((lppw - lpdw - 60) / 2) + 'px',\n                            'margin-top': ((lpph - lpdh) / 2) + 'px'\n                        });\n\n                        setInterval(function () {\n                            $('#' + LivePlayer.id).parent().show();\n                        }, 3000);\n                    }\n                }\n\n                scripts.push(\n                    '//static.csslcloud.net/js/swfobject.js',\n                    '//static.csslcloud.net/js/json3.min.js'\n                );\n            }\n            _this.loadScript(scripts, function () {\n                _this.login(fn);\n\n                function fn() {\n                    _this.history = new History();\n                }\n\n                if (MobileLive.isMobile() == 'isMobile' && $.DrawingBoard) {\n                    var dp = '<canvas id=\"drawPanel\" width=\"1200\" height=\"1200\" style=\"position: absolute;z-index:2;top:0;left: 0\"></canvas>'\n                        + '<iframe id=\"dpa\" src=\"\" frameborder=\"0\" style=\"position: absolute;top:0;left: 0\"></iframe>';\n                    $('#drawPanel').parent().append(dp);\n                    $('div#drawPanel').remove();\n                    $.DrawingBoard.config();\n                }\n            });\n        },\n\n        login: function (fn) {\n            $.ajax({\n                url: '//view.csslcloud.net/api/room/login',\n                type: 'GET',\n                dataType: 'jsonp',\n                data: {\n                    roomid: this.roomid,\n                    userid: this.userid,\n                    viewername: this.viewername,\n                    viewertoken: this.viewertoken,\n                    forcibly: this.forcibly,\n                    viewercustomua: this.viewercustomua,\n                    viewercustominfo: this.viewercustominfo\n                },\n                success: function (data) {\n                    if (!data.success) {\n                        if (typeof DWLive.onLoginError === 'function') {\n                            DWLive.onLoginError(data);\n                        }\n                        return;\n                    }\n\n                    var isHttps = window.location.protocol === 'https:';\n                    var host = data.datas.pusherNode.primary;\n                    if (isHttps && host && host.indexOf(':')) {\n                        var s = host.split(':');\n                        if (s.length == 2) {\n                            var port = parseInt(s[1]);\n                            if (!isNaN(port)) {\n                                var httpsPort = port + 400;\n                                host = s[0] + ':' + httpsPort;\n                            }\n                        }\n                    }\n\n                    var url = document.location.protocol + '//' + host + '/' + data.datas.pusher.nsp;\n                    var key = data.datas.viewer.key;\n                    Pusher.options.pusherUrl = url;\n                    Pusher.options.key = key;\n                    DWLive.viewerid = data.datas.viewer.id;\n                    DWLive.viewername = data.datas.viewer.name;\n                    DWLive.isBan = data.datas.room.isBan;//禁播\n                    DWLive.liveid = data.datas.liveId;\n                    DWLive.upid = data.datas.upId;\n                    DWLive.multiQuality = data.datas.room.multiQuality;\n                    DWLive.documentDisplayMode = data.datas.room.documentDisplayMode;\n                    DWLive.liveCountdown = data.datas.room.liveCountdown;\n\n                    //初始化极速动画对象\n                    if (DWDpc.fastMode) {\n                        $('#documentDisplayMode').val(DWLive.documentDisplayMode);\n                        DWDpc.appendDrawPanel();\n                        DWDpc.init();\n                    }\n                    fn();\n\n                    var delay = data.datas.room.delayTime,\n                        foreignPublish = data.datas.room.foreignPublish;\n                    LivePlayer.delay = delay;\n                    if (delay <= 0) {\n                        DELAY_TIME = 5 * 1000;\n                    }\n                    LivePlayer.foreignPublish = foreignPublish;\n\n                    LivePlayer.openHostMode = data.datas.room.openHostMode;\n                    LivePlayer.dvr = data.datas.room.dvr;\n                    LivePlayer.barrageData = data.datas.room.barrage;\n                    LivePlayer.warmVideoId = data.datas.room.encryptWarmVideoId;\n                    LivePlayer.viewerid = data.datas.viewer.id;\n                    var playerBackgroundImageUri = data.datas.room.playerBackgroundImageUri;\n                    if (!playerBackgroundImageUri) {\n                        playerBackgroundImageUri = '';\n                    } else {\n                        var isHttps = window.location.protocol === 'https:';\n                        if (isHttps) {\n                            playerBackgroundImageUri = playerBackgroundImageUri.replace(/http:/g, 'https:');\n                        }\n                    }\n                    LivePlayer.backgroundImageUri = playerBackgroundImageUri;\n\n                    if (typeof DWLive.playerBackgroundImageUri === 'function') {\n                        DWLive.playerBackgroundImageUri(playerBackgroundImageUri);\n                    }\n\n                    var playerBackgroundHint = data.datas.room.playerBackgroundHint;\n                    if (!playerBackgroundHint) {\n                        playerBackgroundHint = '';\n                    }\n                    LivePlayer.backgroundHint = playerBackgroundHint;\n\n                    if (typeof DWLive.playerBackgroundHint === 'function') {\n                        DWLive.playerBackgroundHint(playerBackgroundHint);\n                    }\n\n                    var announcement = data.datas.announcement;\n                    if (typeof DWLive.onAnnouncementShow === 'function' && announcement) {\n                        DWLive.onAnnouncementShow(announcement);\n                    }\n\n                    var desc = data.datas.room.desc;\n                    if (typeof DWLive.onLiveDesc === 'function') {\n                        DWLive.onLiveDesc(desc);\n                    }\n\n                    var count = data.datas.room.showUserCount;\n                    if (typeof DWLive.showUserCount === 'function') {\n                        DWLive.showUserCount(count);\n                    }\n\n                    var marquee = data.datas.viewer.marquee;\n                    if (typeof DWLive.getMarquee === 'function') {\n                        DWLive.getMarquee(marquee);\n                    }\n\n                    if (typeof DWLive.onLoginSuccess === 'function') {\n                        DWLive.onLoginSuccess();\n                    }\n\n                    var time = data.datas.live;\n                    if (typeof DWLive.onLiveTime === 'function') {\n                        DWLive.onLiveTime(time);\n                    }\n\n                    Pusher.init();\n\n                    if (MobileLive.isMobile() == 'isMobile') {\n                        MobileLive.init();\n                    } else {\n                        LivePlayer.init();\n                    }\n\n                    switch (data.datas.template.type) {\n                        case 6:\n                            Qa.init();\n                            DWLive.sendPublicChatMsg = DWLive.sendPrivateChatMsg = function () {\n                                return false;\n                            };\n                            break;\n                        case 5:\n                            Chat.init();\n                            Qa.init();\n                            DrawPanel.init();\n                            break;\n                        case 4:\n                            Chat.init();\n                            DrawPanel.init();\n                            DWLive.sendQuestionMsg = function () {\n                                return false;\n                            };\n                            break;\n                        case 3:\n                            Chat.init();\n                            DWLive.sendQuestionMsg = function () {\n                                return false;\n                            };\n                            break;\n                        case 2:\n                            Chat.init();\n                            Qa.init();\n                            break;\n                        default:\n                            Chat.init();\n                            Qa.init();\n                            DrawPanel.init();\n                    }\n\n                }\n            });\n        },\n\n        logout: function () {\n            $.ajax({\n                url: '//view.csslcloud.net/api/live/logout',\n                type: 'GET',\n                dataType: 'json',\n                timeout: 5000,\n                xhrFields: {\n                    withCredentials: true\n                },\n                success: function (data) {\n                },\n                error: function (xhr, status, error) {\n                }\n            });\n        },\n\n        getScript: function (url, success) {\n\n            var readyState = false,\n                script = document.createElement('script');\n            script.src = url;\n\n            script.onload = script.onreadystatechange = function () {\n                if (!readyState && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete')) {\n                    readyState = true;\n                    success && success();\n                }\n            };\n            document.body.appendChild(script);\n\n        },\n\n        loadScript: function (res, callback) {\n\n            if (typeof res === 'string') {\n                var _res = res;\n                res = [];\n                res.push(_res);\n            }\n            var _this = this,\n                queue = function (fs, cb) {\n                    _this.getScript(fs.shift(), function () {\n                        fs.length ? queue(fs, cb) : cb && cb();\n                    });\n                };\n\n            queue(res, callback);\n\n        },\n\n        //改名\n        changeNickname: function (name) {\n            if (!name || typeof name !== 'string' || name.length > 20) {\n                return false;\n            }\n            Pusher.socket.emit('change_nickname', name);\n        },\n\n        sendPublicChatMsg: function (msg) {\n            if (!msg || msg.length > 300) {\n                return;\n            }\n            Pusher.socket.emit('chat_message', msg);\n        },\n\n        sendPrivateChatMsg: function (touserid, tousername, msg) {\n            var h = new Date().getHours(),\n                m = new Date().getMinutes(),\n                s = new Date().getSeconds();\n            m = m > 9 ? m : '0' + m;\n            s = s > 9 ? s : '0' + s;\n            var j = {\n                'fromuserid': this.viewerid,\n                'fromusername': this.viewername,\n                'touserid': touserid,\n                'tousername': tousername,\n                'msg': $.trim(msg),\n                'time': h + ':' + m + ':' + s\n            };\n            Pusher.socket.emit('private_chat', JSON.stringify(j));\n        },\n\n        sendQuestionMsg: function (content) {\n            if (!content || content.length > 300) {\n                return;\n            }\n\n            var j = {\n                'action': 'question',\n                'value': {\n                    'userId': this.viewerid,\n                    'userName': this.viewername,\n                    'content': content\n                }\n            };\n\n            try {\n                Pusher.socket.emit('question', JSON.stringify(j));\n            } catch (e) {\n            }\n        },\n\n        barrage: function (msg, color) {\n            // 移动H5暂不支持弹幕功能\n            if (MobileLive.isMobile() == 'isMobile') {\n                return;\n            }\n\n            var newm = $.trim(msg);\n            if (!newm) {\n                return;\n            }\n            newm = msg.replace(/\\[em2?_([0-9]*)\\]/g, '');\n\n            LivePlayer.barrage({\n                'txt': newm,\n                'color': color == null ? 0xffffff : color\n            });\n        },\n\n        getLine: function () {\n            if (MobileLive.isMobile() == 'isMobile') {\n                var l = MobileLive.src;\n                return l;\n            } else {\n                return LivePlayer.getLine();\n            }\n        },\n\n        changeLine: function (line) {\n            if (MobileLive.isMobile() == 'isMobile') {\n                MobileLive.changeLine(line);\n            } else {\n                LivePlayer.changeLine(line);\n            }\n        },\n\n        onlyAudio: function () {\n            if (MobileLive.isMobile() == 'isMobile') {\n                MobileLive.onlyAudio();\n            } else {\n                LivePlayer.onlyAudio();\n            }\n        },\n\n        setSound: function (n) {\n            if (MobileLive.isMobile() == 'isMobile') {\n                return;\n            }\n            LivePlayer.setSound(n);\n        },\n\n        answerRollcall: function (rid, pid) {\n            var j = {\n                'rollcallId': rid,\n                'userId': this.viewerid,\n                'userName': this.viewername,\n                'publisherId': pid\n            };\n            Pusher.socket.emit('answer_rollcall', JSON.stringify(j));\n        },\n\n        replyVote: function (voteid, option, pid) {\n            var j = {\n                'voteId': voteid,\n                'voteOption': option,\n                'publisherId': pid\n            };\n            Pusher.socket.emit('reply_vote', JSON.stringify(j));\n        },\n\n        docBarrage: function (msg, color) {\n            if (!$.trim(msg)) {\n                return;\n            }\n            DrawPanel.barrage({\n                'txt': msg,\n                'color': color == null ? 0xffffff : color\n            });\n        },\n\n        openBarrage: function (b) {\n            LivePlayer.openBarrage(b);\n        },\n\n        showControl: function (b) {\n            LivePlayer.showControl(b);\n        },\n\n        livePlayerInit: function () {\n            LivePlayer.init();\n        },\n\n        openSound: function () {\n            LivePlayer.openSound();\n        },\n\n        closeSound: function () {\n            LivePlayer.closeSound();\n        },\n\n        docAdapt: function (t) {\n            live.adapt = t;\n        },\n\n        // 请求语音互动\n        requestInteraction: function (t) {\n            live.interaction.requestInteraction(t);\n        },\n\n        // 挂断双向视频\n        hangupInteraction: function () {\n            live.interaction.hangupInteraction();\n        },\n\n        // 进入互动房间\n        enterInteractionRoom: function (callback) {\n            var err = undefined;\n            try {\n                Pusher.socket.emit('speak_enter');\n            } catch (e) {\n                err = e;\n            } finally {\n                if (typeof callback === 'function') callback(err);\n            }\n        },\n\n        // 发送互动信息\n        sendInteractionMessage: function (p, toId, event, data, callback) {\n            var type = 'audio';\n            if (p.video) {\n                type = 'audiovideo';\n            }\n\n            var j = {\n                type: type,\n                fromname: this.viewername,\n                fromid: this.viewerid,\n                fromrole: 'student',\n                toid: toId,\n                event: event,\n                data: JSON.stringify(data)\n            };\n\n            var err = undefined;\n            try {\n                Pusher.socket.emit('speak_message', JSON.stringify(j));\n            } catch (e) {\n                err = e;\n            } finally {\n                if (typeof callback === 'function') callback(err);\n            }\n        },\n\n        // 跑马灯\n        showMarquee: function (m) {\n            LivePlayer.showMarquee(m);\n        },\n        showMarqueeDoc: function (m) {\n            DrawPanel.showMarquee(m);\n        },\n        setDocMode: function (t) {\n            if (!DWDpc.fastMode) {\n                return;\n            }\n            DWDpc.setDocMode(t);\n        },\n        getDocs: function (callback) {\n            if (!DWDpc.fastMode) {\n                return;\n            }\n            DWDpc.getDocs(callback);\n        },\n        changePageTo: function (dId, pI) {\n            if (!DWDpc.fastMode) {\n                return;\n            }\n            DWDpc.changePageTo(dId, pI);\n        },\n        // 用户问卷功能提交接口（data -> {\"subjectsAnswer\":[{\"subjectId\":\"D4D648931609E9B9\",\"selectedOptionId\":\"306B84236FBD561E\"},{\"subjectId\":\"3FFFF7EC39BC96CC\",\"selectedOptionIds\":\"C5E59BBB4FBD975C,BE571C8FC644B1E1\"},{\"subjectId\":\"3CFA9D81528D476B\",\"answerContent\":\"asdasdasd\"}],questionnaireId:'0EDEEC4D0321974B'};\n        // callBack->回调返回所有数据）\n        submitQuestionnaire: function (_data, callBack) {\n            if (!_data) {\n                return;\n            }\n            var params = {\n                questionnaireid: _data.questionnaireId,\n                answers: JSON.stringify({subjectsAnswer: _data.subjectsAnswer})\n            };\n            $.ajax({\n                url: '//eva.csslcloud.net/api/questionnaire/submit',\n                type: 'GET',\n                dataType: 'jsonp',\n                timeout: 5000,\n                data: params,\n                xhrFields: {\n                    withCredentials: true\n                },\n                success: function (data) {\n                    if (callBack) {\n                        callBack(data);\n                    } else {\n                        if (console.log) {\n                            console.log('no callback');\n                        }\n                    }\n                },\n                error: function (xhr, status, error) {\n                    if (callBack) {\n                        callBack({\n                            errorCode: 1,\n                            msg: 'request was aborted', result: error\n                        });\n                    }\n                }\n\n            });\n\n        },\n        getPublishingQuestionnaire: function () {\n            $.ajax({\n                url: '//eva.csslcloud.net/api/questionnaire/info',\n                type: 'GET',\n                dataType: 'jsonp',\n                xhrFields: {\n                    withCredentials: true\n                },\n                success: function (data) {\n                    if (!data.success) {\n                        return;\n                    }\n\n                    if (typeof DWLive.onQuestionnairePublish === 'function') {\n                        DWLive.onQuestionnairePublish(data);\n                    } else {\n                        if (console.log) {\n                            console.log('onQuestionnairePublish is undefined');\n                        }\n                    }\n                },\n                error: function (e) {\n                    if (typeof DWLive.onQuestionnairePublish === 'function') {\n                        DWLive.onQuestionnairePublish({errorCode: 1, msg: 'request error', result: e});\n                    } else {\n                        if (console.log) {\n                            console.log('onQuestionnairePublish is undefined');\n                        }\n                    }\n                }\n            });\n        }\n\n    };\n    var options = {\n        init: function () {\n            this['userId'] = DWLive.userid,\n                this['roomId'] = DWLive.roomid,\n                this['liveId'] = DWLive.liveid,\n                this['viewerId'] = DWLive.viewerid,\n                this['upId'] = DWLive.upid;\n        }\n    };\n    // Pusher\n    var Pusher = {\n        options: {\n            pusherUrl: '',\n            key: '',\n            maxMessageCount: 300, // 保存聊天条数\n            userId: '',\n            roomId: '',\n            livePlayerId: '',\n            drawPanel: ''\n        },\n        drawjson: [],\n        pagechangedata: [],\n\n        init: function () {\n\n            var t = MobileLive.isMobile() == 'isMobile' ? 1 : 0;\n\n            this.socket = io.connect(this.options.pusherUrl, {\n                query: {\n                    sessionid: Pusher.options.key,\n                    platform: 1,\n                    terminal: t\n                }\n            });\n            this.bind();\n        },\n\n        bind: function () {\n            // 翻页回调\n            this.socket.on('page_change', function (j) {\n                if (j && typeof(j) === 'string') {\n                    Pusher.pagechangedata.push(JSON.parse(j));\n                }\n                if (typeof window.on_cc_live_dw_page_change === 'function') {\n                    window.on_cc_live_dw_page_change(j);\n                }\n                if (typeof DWLive.onPageChange === 'function') {\n                    var obj = JSON.parse(j);\n                    var data = {\n                        docId: obj.value.docid,\n                        docName: obj.value.fileName,\n                        docTotalPage: obj.value.totalPage,\n                        pageNum: obj.value.page\n                    };\n                    DWLive.onPageChange(data);\n                }\n            });\n\n            // 改名\n            this.socket.on('change_nickname', function (j) {\n                DWLive.viewername = j;\n                if (typeof DWLive.onChangeNickname === 'function') {\n                    DWLive.onChangeNickname(j);\n                }\n            });\n\n            // 动画翻页\n            this.socket.on('animation_change', function (j) {\n                if (typeof window.on_cc_live_dw_animation_change === 'function') {\n                    window.on_cc_live_dw_animation_change(j);\n                }\n            });\n\n            // 画板回调\n            this.socket.on('draw', function (j) {\n                if (j && typeof(j) === 'string') {\n                    Pusher.drawjson.push(JSON.parse(j));\n                }\n                if (typeof window.on_cc_live_dw_draw === 'function') {\n                    window.on_cc_live_dw_draw(j);\n                }\n            });\n\n            this.socket.on('room_user_count', function (j) {\n                if (typeof DWLive.onUserCountMessage === 'function') {\n                    DWLive.onUserCountMessage(j);\n                }\n            });\n\n            this.socket.on('publish_stream', function (j) {\n                if (LivePlayer) {\n                    LivePlayer.isPublishing = 1;\n                }\n                if (LivePlayer && LivePlayer.start) {\n                    LivePlayer.start();\n                }\n                if (typeof DWLive.onLiveStart === 'function') {\n                    DWLive.onLiveStart(j);\n                }\n            });\n\n            this.socket.on('end_stream', function (j) {\n                if (LivePlayer) {\n                    LivePlayer.isPublishing = 0;\n                }\n                if (LivePlayer && LivePlayer.end) {\n                    LivePlayer.end();\n                }\n                if (DrawPanel && DrawPanel.clear) {\n                    DrawPanel.clear();\n                }\n                DWDpc.clear();\n                if (typeof DWLive.onLiveEnd === 'function') {\n                    DWLive.onLiveEnd(j);\n                }\n            });\n\n            this.socket.on('kick_out', function (j) {\n                console.log(j);\n                Pusher.socket.disconnect();\n\n                if (typeof DWLive.onKickOut === 'function') {\n                    DWLive.onKickOut(j);\n                }\n                if (!MobileLive.isIPad() && !MobileLive.isIPhone() && !MobileLive.isAndroid() && !MobileLive.isWindowsPhone()) {\n                    LivePlayer.getFlash()._kickOff();\n                }\n            });\n\n            this.socket.on('announcement', function (data) {\n                data = toJson(data);\n\n                if (data.action == 'release') {\n                    if (typeof DWLive.onAnnouncementRelease === 'function') {\n                        DWLive.onAnnouncementRelease(data.announcement);\n                    }\n                } else if (data.action == 'remove') {\n                    if (typeof DWLive.onAnnouncementRemove === 'function') {\n                        DWLive.onAnnouncementRemove(data);\n                    }\n                }\n            });\n\n            // 签到功能\n            this.socket.on('start_rollcall', function (data) {\n                data = toJson(data);\n                if (typeof DWLive.onStartRollCall === 'function') {\n                    DWLive.onStartRollCall(data);\n                }\n            });\n\n            // 开始抽奖\n            this.socket.on('start_lottery', function (data) {\n                data = toJson(data);\n                if (typeof DWLive.onStartLottery === 'function') {\n                    DWLive.onStartLottery(data);\n                }\n            });\n\n            // 中奖\n            this.socket.on('win_lottery', function (data) {\n                data = toJson(data);\n                if (typeof DWLive.onWinLottery === 'function') {\n                    DWLive.onWinLottery(data);\n                }\n            });\n\n            // 结束抽奖\n            this.socket.on('stop_lottery', function (data) {\n                data = toJson(data);\n                if (typeof DWLive.onStopLottery === 'function') {\n                    DWLive.onStopLottery(data);\n                }\n            });\n\n            // 开始答题\n            this.socket.on('start_vote', function (data) {\n                data = toJson(data);\n                if (typeof DWLive.onStartVote === 'function') {\n                    DWLive.onStartVote(data);\n                }\n            });\n\n            // 结束答题\n            this.socket.on('stop_vote', function (data) {\n                data = toJson(data);\n                if (typeof DWLive.onStopVote === 'function') {\n                    DWLive.onStopVote(data);\n                }\n            });\n\n            // 答题结果\n            this.socket.on('vote_result', function (data) {\n                data = toJson(data);\n                if (typeof DWLive.onVoteResult === 'function') {\n                    DWLive.onVoteResult(data);\n                }\n            });\n\n            // 禁播\n            this.socket.on('ban_stream', function (data) {\n                data = toJson(data);\n                //h5禁播\n                DWLive.isBan = 1;\n                if (MobileLive.isMobile() == 'isMobile') {\n                    MobileLive.ban();\n\n                } else {\n                    LivePlayer.banLive();\n                }\n\n                if (typeof DWLive.onBanStream === 'function') {\n                    DWLive.onBanStream(data);\n                }\n            });\n            // 解禁\n            this.socket.on('unban_stream', function (data) {\n                data = toJson(data);\n                //h5解禁\n                DWLive.isBan = 0;\n                if (MobileLive.isMobile() == 'isMobile') {\n                    MobileLive.unban();\n                } else {\n                    LivePlayer.unbanLive();\n\n                }\n\n                if (typeof DWLive.onUnBanStream === 'function') {\n                    DWLive.onUnBanStream(data);\n                }\n            });\n            this.socket.on('room_setting', function (data) {\n                data = toJson(data);\n                if (typeof DWLive.onRoomSetting === 'function') {\n                    DWLive.onRoomSetting(data);\n                }\n            });\n\n            // 讲师接受互动信息\n            this.socket.on('accept_speak', function (data) {\n                if (typeof window.on_cc_live_accept_interaction === 'function') {\n                    window.on_cc_live_accept_interaction(toJson(data));\n                }\n            });\n\n            // 互动信息\n            this.socket.on('speak_message', function (data) {\n                if (typeof window.on_cc_live_interaction_message === 'function') {\n                    window.on_cc_live_interaction_message(toJson(data));\n                }\n            });\n\n            // 已经在聊天的列表信息\n            this.socket.on('speak_peer_list', function (data) {\n                if (typeof window.on_cc_live_interaction_chatusers === 'function') {\n                    window.on_cc_live_interaction_chatusers(toJson(data));\n                }\n            });\n\n            // 挂断互动信息\n            this.socket.on('speak_disconnect', function (data) {\n                if (typeof window.on_cc_live_interaction_disconnect === 'function') {\n                    window.on_cc_live_interaction_disconnect(toJson(data));\n                }\n            });\n\n            // 广播信息\n            this.socket.on('broadcast_msg', function (data) {\n                if (typeof DWLive.onBroadcastMsg === 'function') {\n                    DWLive.onBroadcastMsg(toJson(data).value);\n                }\n            });\n\n            // 发布提问\n            this.socket.on('publish_question', function (data) {\n                if (typeof DWLive.onQaPublish === 'function') {\n                    DWLive.onQaPublish(toJson(data));\n                }\n            });\n\n            /**\n             * 发布问卷\n             * */\n            this.socket.on('questionnaire_publish', function (data) {\n                data = toJson(data);\n\n                if (typeof DWLive.onQuestionnairePublish === 'function') {\n                    DWLive.onQuestionnairePublish(data);\n                }\n            });\n\n            /**\n             * 结束发布问卷\n             * */\n            this.socket.on('questionnaire_publish_stop', function (data) {\n                data = toJson(data);\n\n                if (typeof DWLive.onQuestionnairePublishStop === 'function') {\n                    DWLive.onQuestionnairePublishStop(data);\n                }\n            });\n\n            /**\n             * 发布问卷统计\n             * */\n            this.socket.on('questionnaire_publish_statis', function (data) {\n                data = toJson(data);\n\n                if (typeof DWLive.onQuestionnairePublishStatis === 'function') {\n                    DWLive.onQuestionnairePublishStatis(data);\n                }\n            });\n\n            this.socket.on('room_teachers', function (data) {\n                if (typeof DWLive.onOnlineTeachers === 'function') {\n                    DWLive.onOnlineTeachers(toJson(data));\n                }\n            });\n\n            this.socket.on('external_questionnaire_publish', function (data) {\n                if (typeof DWLive.onExternalQuestionnairePublish === 'function') {\n                    DWLive.onExternalQuestionnairePublish(toJson(data));\n                }\n            });\n\n            this.socket.on('ban_chat', function (data) {\n                if (typeof DWLive.onBanChat === 'function') {\n                    DWLive.onBanChat(toJson(data));\n                }\n            });\n\n            this.socket.on('unban_chat', function (data) {\n                if (typeof DWLive.onUnBanChat === 'function') {\n                    DWLive.onUnBanChat(toJson(data));\n                }\n            });\n            /**\n             * 获取当前播放（数据源）场景（0：无意义(默认)，10、11:（开启/关闭）摄像头，20：图片，30：插播视频，40：区域捕获，50：桌面共享，60：自定义场景）\n             * **/\n            this.socket.on('switch_source', function (data) {\n                if (typeof DWLive.onSwitchSource === 'function') {\n                    DWLive.onSwitchSource(data);\n                }\n            });\n\n            var _this = this;\n            setTimeout(function () {\n                try {\n                    _this.socket.emit('room_user_count');\n                } catch (e) {\n                }\n                try {\n                    _this.socket.emit('room_teachers');\n                } catch (e) {\n                }\n            }, 1500);\n            setInterval(function () {\n                try {\n                    _this.socket.emit('room_user_count');\n                } catch (e) {\n                }\n                try {\n                    _this.socket.emit('room_teachers');\n                } catch (e) {\n                }\n            }, 15000);\n        },\n\n        // 请求互动\n        requestInteraction: function (p, callback) {\n\n            var t = 'audio';\n\n            if (p.video) {\n                t += 'video';\n            }\n\n            var j = {\n                'viewerId': DWLive.viewerid,\n                'viewerName': DWLive.viewername,\n                'type': t\n            };\n\n            var err = undefined;\n            try {\n                this.socket.emit('request_speak', JSON.stringify(j));\n            } catch (e) {\n                err = e;\n            } finally {\n                if (typeof callback === 'function') callback(err);\n            }\n        },\n\n        // 取消申请\n        cancelRequestInteraction: function (type, callback) {\n            var j = {\n                'viewerId': this.viewerid,\n                'viewerName': this.viewername,\n                'type': type\n            };\n\n            debug('interaction', '取消申请：' + JSON.stringify(j));\n\n            var err = undefined;\n            try {\n                this.socket.emit('cancel_request_speak', JSON.stringify(j));\n            } catch (e) {\n                err = e;\n            } finally {\n                if (typeof callback === 'function') callback(err);\n            }\n        },\n\n        //挂断互动\n        hangupInteraction: function (type, callback) {\n            var j = {\n                'viewerId': DWLive.viewerid,\n                'viewerName': DWLive.viewername,\n                'type': type\n            };\n\n            debug('interaction', '挂断事件：' + JSON.stringify(j));\n\n            var err = undefined;\n            try {\n                this.socket.emit('hangup_interaction', JSON.stringify(j));\n            } catch (e) {\n                err = e;\n            } finally {\n                if (typeof callback === 'function') callback(err);\n            }\n        }\n    };\n\n    /**\n     * 语音互动支持\n     *\n     * */\n    var Interaction = function (opts) {\n        try {\n            window.PeerConnection = (window.PeerConnection || window.webkitPeerConnection00 || window.webkitRTCPeerConnection || window.mozRTCPeerConnection);\n            window.URL = (window.URL || window.webkitURL || window.msURL || window.oURL);\n            window.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);\n            window.nativeRTCIceCandidate = (window.mozRTCIceCandidate || window.RTCIceCandidate);\n            window.nativeRTCSessionDescription = (window.mozRTCSessionDescription || window.RTCSessionDescription);\n        } catch (e) {\n        }\n\n        this.usersPcs = {\n            length: 0\n        };\n\n        // 本地流信息\n        this.local = {\n            type: {\n                video: false,\n                audio: false\n            },\n            video: {},\n            audio: {}\n        };\n\n        this.isRequesting = false;\n\n        /**\n         * 请求语音互动\n         *\n         * t = {\n         *  video: true,\n         *  audio: true\n         * }\n         * */\n        this.requestInteraction = function (t, callback) {\n            debug('Interaction', '请求互动');\n\n            this.local.type = t;\n\n            this.isRequesting = true;\n\n            // 请求互动超时计时器\n            this.setRequestTimeoutTimer();\n\n            // 创建音视频信息\n            this.createLocalMedia(function (error) {\n                if (error) {\n                    if (typeof window.on_cc_live_interaction_error === 'function') {\n                        window.on_cc_live_interaction_error(live.interaction.local.type, error, '创建音视频信息出错');\n                    }\n                    return;\n                }\n\n                Pusher.requestInteraction(t, callback);\n            });\n        };\n\n\n        // 语音通话计时器\n        this.setCallingTimer = function () {\n            live.interaction.interactionTime = 0;\n            live.interaction.interactionTimeInterval = setInterval(function () {\n                ++live.interaction.interactionTime;\n                if (typeof window.on_cc_live_interaction_interval === 'function') {\n                    var p = live.interaction.local.type;\n                    var t = live.interaction.interactionTime;\n                    window.on_cc_live_interaction_interval(p, t);\n                }\n            }, 1000);\n        };\n        // 清除语音通话计时器\n        this.clearCallingTimer = function () {\n            live.interaction.interactionTime = 0;\n            clearInterval(live.interaction.interactionTimeInterval);\n        };\n\n        // 互动请求超时定时器\n        this.setRequestTimeoutTimer = function () {\n            /**\n             * 请求互动，60s内没有接受，则自动断开\n             *\n             * 通知pusher断开\n             * */\n            live.interaction.REQUEST_INTERACTION_TIMEOUT = setTimeout(function () {\n                live.interaction.REQUEST_INTERACTION_TIMEOUT = -1;\n\n                // 超时挂断语音通话\n                live.interaction.hangupInteraction(DWLive.viewerid);\n                live.interaction.stopLocalStream();\n\n                live.interaction.isRequesting = false;\n\n                $('#interactionLocalVideo')[0].src = '';\n                $('#videoInteraction').hide();\n\n                if (typeof window.on_cc_live_interaction_request_timeout === 'function') {\n                    window.on_cc_live_interaction_request_timeout(live.interaction.local.type);\n                }\n            }, 60000);\n        };\n        // 清空互动请求超时定时器\n        this.clearRequestTimeoutTimer = function () {\n            if (live.interaction.REQUEST_INTERACTION_TIMEOUT > 0) {\n                clearTimeout(live.interaction.REQUEST_INTERACTION_TIMEOUT);\n                live.interaction.REQUEST_INTERACTION_TIMEOUT = -1;\n            }\n        };\n\n        // 停止本地流\n        this.stopLocalStream = function () {\n            if (live.interaction.local.video.stream) {\n                try {\n                    live.interaction.local.video.stream.getTracks().forEach(function (track) {\n                        track.stop();\n                    });\n                } catch (e) {\n                }\n            }\n\n            if (live.interaction.local.audio.stream) {\n                try {\n                    live.interaction.local.audio.stream.getTracks().forEach(function (track) {\n                        track.stop();\n                    });\n                } catch (e) {\n                }\n            }\n        };\n\n        this.cancelInteraction = function () {\n            live.interaction.isRequesting = false;\n\n            if (typeof window.on_cc_live_interaction_cancal === 'function') {\n                window.on_cc_live_interaction_cancal(live.interaction.local.type);\n            }\n        };\n\n        // 断开连接\n        this.disconnectInteraction = function (uId) {\n            DWLive.openSound();\n\n            this.clearRequestTimeoutTimer();\n\n            // 删除所有\n            if (uId == DWLive.viewerid) {\n                $.each(live.interaction.usersPcs, function (userId, up) {\n                    var pc = up.pc;\n                    if (pc == null) {\n                        return true;\n                    }\n\n                    pc.close();\n                    pc = null;\n\n                    if (live.interaction.usersPcs[userId]) {\n                        delete live.interaction.usersPcs[userId];\n                        var l = live.interaction.usersPcs.length - 1;\n                        live.interaction.usersPcs.length = l < 0 ? 0 : l;\n                    }\n\n                });\n            } else {\n                $.each(live.interaction.usersPcs, function (userId, up) {\n                    var pc = up.pc;\n                    if (!pc) {\n                        return true;\n                    }\n\n                    if (userId != uId) {\n                        return true;\n                    }\n\n                    pc.close();\n                    pc = null;\n\n                    if (live.interaction.usersPcs[userId]) {\n                        delete live.interaction.usersPcs[userId];\n                        var l = live.interaction.usersPcs.length - 1;\n                        live.interaction.usersPcs.length = l < 0 ? 0 : l;\n                    }\n                });\n            }\n\n            if (live.interaction.usersPcs.length == 0) {\n                this.stopLocalStream();\n            }\n\n            live.interaction.isInteractioning = false;\n            live.interaction.isRequesting = false;\n        };\n\n        // 创建本地音视频流\n        this.createLocalAudioAndVideoMedia = function (c) {\n            var that = this;\n            getUserMedia.call(navigator, {\n                video: true,\n                audio: true\n            }, function (stream) {\n                that.local.video.stream = stream;\n\n                if (c && typeof c === 'function') {\n                    c(stream);\n                }\n            }, function (error) {\n                debug('Interaction', 'getUserMedia error: ' + error);\n\n                if (c && typeof c === 'function') {\n                    c(error);\n                }\n            });\n        };\n\n        // 创建本地音频流\n        this.createLocalAudioMedia = function (c) {\n            var that = this;\n            getUserMedia.call(navigator, {\n                video: false,\n                audio: true\n            }, function (stream) {\n                that.local.audio.stream = stream;\n\n                if (c && typeof c === 'function') {\n                    c(stream);\n                }\n            }, function (error) {\n                debug('Interaction', 'getUserMedia error: ' + error);\n\n                if (c && typeof c === 'function') {\n                    c(error);\n                }\n            });\n        };\n\n        this.createLocalMedia = function (c) {\n            var that = this;\n            var p = that.local.type;\n            getUserMedia.call(navigator, p, function (stream) {\n                if (p.video) {\n                    that.local.video.stream = stream;\n                } else {\n                    that.local.audio.stream = stream;\n                }\n\n                if (typeof window.on_cc_live_interaction_local_media === 'function') {\n                    window.on_cc_live_interaction_local_media(p, stream);\n                }\n\n                if (c && typeof c === 'function') {\n                    c();\n                }\n            }, function (error) {\n                debug('Interaction', 'getUserMedia error: ' + error);\n\n                if (c && typeof c === 'function') {\n                    c(error);\n                }\n            });\n        };\n\n        this.iceServers = {\n            'iceServers': [{\n                url: 'stun:turn.csslcloud.net:3478',\n                credential: 'bokecc',\n                username: 'cc'\n            }, {\n                url: 'turn:turn.csslcloud.net:3478',\n                credential: 'bokecc',\n                username: 'cc'\n            }]\n        };\n\n        // 创建被动创建连接的PC\n        this.createAnswerPeerConnection = function (chatuser) {\n            var pc = new PeerConnection(this.iceServers);\n\n            if (chatuser.type == 'audio') {\n                if (!live.interaction.local.audio.stream) {\n                    this.createLocalAudioMedia();\n                }\n                pc.addStream(live.interaction.local.audio.stream);\n            } else {\n                if (!live.interaction.local.video.stream) {\n                    this.createLocalAudioAndVideoMedia();\n                }\n                pc.addStream(live.interaction.local.video.stream);\n            }\n\n            // 如果检测到媒体流连接到本地，将其绑定到一个audio标签上输出\n            pc.onaddstream = function (event) {\n                if (typeof window.on_cc_live_interaction_remote_media === 'function') {\n                    window.on_cc_live_interaction_remote_media(live.interaction.local.type, chatuser, event.stream);\n                }\n            };\n\n            pc.createAnswer(function (desc) {\n                pc.setLocalDescription(desc);\n                DWLive.sendInteractionMessage(live.interaction.local.type, chatuser.id, 'answer', desc);\n            }, function (error) {\n                debug('Interaction', 'Failure callback: ' + error);\n            });\n\n            pc.onicecandidate = function (event) {\n                if (event.candidate !== null) {\n                    DWLive.sendInteractionMessage(live.interaction.local.type, chatuser.id, '', event.candidate);\n                }\n            };\n\n            live.interaction.usersPcs[chatuser.id] = {\n                pc: pc,\n                user: chatuser\n            };\n\n            live.interaction.usersPcs.length += 1;\n        };\n\n        // 创建主动创建连接的PC\n        this.createOfferPeerConnection = function (chatuser) {\n            var pc = new PeerConnection(this.iceServers);\n\n            var p = live.interaction.local.type;\n            if (p.video) {\n                pc.addStream(live.interaction.local.video.stream);\n            } else {\n                pc.addStream(live.interaction.local.audio.stream);\n            }\n\n            // 如果检测到媒体流连接到本地，将其绑定到一个audio标签上输出\n            pc.onaddstream = function (event) {\n                if (typeof window.on_cc_live_interaction_remote_media === 'function') {\n                    window.on_cc_live_interaction_remote_media(live.interaction.local.type, chatuser, event.stream);\n                }\n            };\n\n            pc.oniceconnectionstatechange = function (d) {\n                debug('Interaction', 'iceConnectionState ...' + pc.iceConnectionState);\n\n                if (pc.iceConnectionState == 'failed') {\n                    debug('Interaction', 'iceConnectionState failed');\n\n                    live.interaction.hangupInteraction();\n\n                    if (typeof window.on_cc_live_interaction_disconnect === 'function') {\n                        window.on_cc_live_interaction_disconnect({\n                            disconnectid: DWLive.viewerid\n                        });\n                    }\n                }\n            };\n\n            pc.createOffer(function (desc) {\n                pc.setLocalDescription(desc);\n\n                DWLive.sendInteractionMessage(p, chatuser.id, 'offer', desc);\n            }, function (error) {\n                if (typeof window.on_cc_live_interaction_error === 'function') {\n                    window.on_cc_live_interaction_error(live.interaction.local.type, error, 'createOfferPeerConnection');\n                }\n            });\n\n            pc.onicecandidate = function (event) {\n                if (event.candidate !== null) {\n                    DWLive.sendInteractionMessage(p, chatuser.id, '', event.candidate);\n                }\n            };\n\n            live.interaction.usersPcs[chatuser.id] = {\n                pc: pc,\n                user: chatuser\n            };\n\n            live.interaction.usersPcs.length += 1;\n        };\n\n        this.id = opts.interaction.id;\n\n        // 当前浏览器是否支持互动功能\n        this.isSupportInteraction = function () {\n            return window.location.protocol === 'https:' && !!(PeerConnection && URL && getUserMedia && nativeRTCIceCandidate && nativeRTCSessionDescription);\n        };\n\n        // 挂断互动\n        this.hangupInteraction = function (callback) {\n            if (this.isInteractioning) {\n                Pusher.hangupInteraction(this.type, callback);\n            } else if (this.isRequesting) {\n                Pusher.cancelRequestInteraction(this.type, callback);\n                this.stopLocalStream();\n                this.cancelInteraction();\n            } else {\n                this.stopLocalStream();\n                this.cancelInteraction();\n            }\n        };\n    };\n\n    // LivePlayer\n    var LivePlayer = {\n        id: 'livePlayer',\n\n        swfUrl: '//zeus.csslcloud.net/flash/Player.swf',\n\n        isReady: false,\n\n        isPublishing: 0,\n\n        delay: '',\n\n        foreignPublish: '',\n\n        init: function () {\n            var flashvars = {\n                'userid': DWLive.userid,\n                'roomid': DWLive.roomid,\n                'foreignPublish': this.foreignPublish,\n                'warmvideoid': this.warmVideoId,\n                'openhostmode': this.openHostMode, // 多主讲\n                'dvr': this.dvr,\n                'barrage': this.barrageData,\n                'backgroundImageUri': this.backgroundImageUri,\n                'backgroundHint': this.backgroundHint,\n                'countDownTime': DWLive.liveCountdown,\n                'openMultiQuality': DWLive.multiQuality,\n                'language': DWLive.language || '',\n                'type': 'liveplayer',\n                'upid': DWLive.upid,\n                'viewerid': this.viewerid,\n                'ua': 1\n            };\n\n            var buffer = this.delay;\n            if (buffer > 0) {\n                flashvars.buffer = buffer;\n            }\n\n            var params = {\n                allowFullscreen: 'true',\n                allowScriptAccess: 'always',\n                wmode: 'transparent'\n            };\n\n            swfobject.embedSWF(this.swfUrl, this.id, '100%', '100%', '10.0.0',\n                '/flash/expressInstall.swf', flashvars, params);\n\n        },\n\n        getFlash: function () {\n            return swfobject.getObjectById(this.id);\n        },\n\n        getPlayerTime: function () {\n            var t = parseInt(this.getFlash()._time());\n            if (isNaN(t) || t < 0) {\n                return 0;\n            }\n            return t;\n        },\n\n        start: function () {\n            if (MobileLive.isMobile() == 'isMobile') {\n                //禁播\n                if (DWLive.isBan) {\n                    $('#livePlayer').css({\n                        'text-align': 'center',\n                        'color': 'white',\n                        'font-size': '18px',\n                        'line-height': '232px'\n                    });\n                    $('#livePlayer').html('<p>直播已封禁，请联系管理员</p>');\n                    return;\n                }\n\n                setTimeout(function () {\n                    MobileLive.init();\n                }, DELAY_TIME);\n            } else {\n                if (!this.getFlash()) {\n                    return;\n                }\n                this.isPublishing = 1;\n                this.getFlash()._streamStart();\n            }\n        },\n\n        end: function () {\n            if (MobileLive.isMobile() == 'isMobile') {\n                setTimeout(function () {\n                    MobileLive.end();\n                }, DELAY_TIME);\n            } else {\n\n                if (!this.getFlash()) {\n                    return;\n                }\n                this.isPublishing = 0;\n                this.getFlash()._streamEnd();\n            }\n        },\n\n        // 弹幕\n        barrage: function (m) {\n            if (!m) {\n                return;\n            }\n\n            if (!this.getFlash()) {\n                return;\n            }\n\n            if (this.getFlash()._jsTOASbarrage) {\n                this.getFlash()._jsTOASbarrage(m);\n            }\n        },\n\n        getLine: function () {\n            var lines = this.getFlash().getLine();\n            if (lines) {\n                lines = JSON.parse(lines);\n            }\n            return lines;\n        },\n\n        changeLine: function (line) {\n            this.getFlash().changeLine(line);\n        },\n\n        onlyAudio: function () {\n            this.getFlash()._onlyAudio();\n        },\n\n        setSound: function (n) {\n            this.getFlash()._SetSound(n);\n        },\n\n        // 打开声音\n        openSound: function () {\n            if (!this.getFlash()) {\n                return;\n            }\n\n            this.getFlash()._onSound();\n        },\n\n        // 关闭声音\n        closeSound: function () {\n            if (!this.getFlash()) {\n                return;\n            }\n\n            this.getFlash()._unSound();\n        },\n\n        // 开启关闭弹幕\n        openBarrage: function (b) {\n            if (!this.getFlash()) {\n                return;\n            }\n\n            this.getFlash()._barrage(b);\n        },\n\n        showControl: function (b) {\n            if (!this.getFlash()) {\n                return;\n            }\n            this.getFlash()._ShowControl(b);\n        },\n\n        //封禁\n        banLive: function () {\n            if (!this.getFlash()) {\n                return;\n            }\n            this.getFlash()._banLive();\n        },\n\n        //解禁\n        unbanLive: function () {\n            if (!this.getFlash()) {\n                return;\n            }\n            this.getFlash()._unbanLive();\n        },\n\n        // 显示跑马灯功能\n        showMarquee: function (marquee) {\n            if (!marquee) {\n                return;\n            }\n\n            if (!this.getFlash()) {\n                return;\n            }\n\n            this.getFlash()._showMarqueePlugin(marquee);\n        }\n    };\n\n    // window.LivePlayer = LivePlayer;\n\n    window._onStart = function () {\n//\t\t直播播放器准备开始播放\n        LivePlayer.isReady = true;\n    };\n\n    function initDrawPanelInfo() {\n        if (!isHistoryReady) {\n            setTimeout(function () {\n                initDrawPanelInfo();\n            }, 3000);\n            return;\n        }\n\n        if (DWDpc.fastMode) {\n            return;\n        }\n\n        if (draws.length) {\n            DrawPanel.draws(draws);\n            draws = [];\n        }\n\n        // 显示最后一张图片\n        if (pageChanges.length) {\n            var ppc = pageChanges.pop();\n            if (!ppc) {\n                return;\n            }\n\n            DrawPanel.filp(ppc);\n            if (animations.length) {\n                var animation = animations.pop();\n\n                var animationJ = toJson(animation);\n                var ppcJ = toJson(ppc);\n\n                if (ppcJ.docid == animationJ.docid && ppcJ.time <= animationJ.time) {\n                    DrawPanel.animationFilp(animation);\n                }\n            }\n\n            pageChanges = [];\n        }\n    }\n\n\n    // DrawPanel\n    var DrawPanel = {\n        id: 'drawPanel',\n\n        isReady: false,\n\n        isProcessing: false,\n\n        getWidth: function () {\n            return '100%';\n        },\n\n        getHeight: function () {\n            return '100%';\n        },\n\n        swfUrl: '//zeus.csslcloud.net/flash/Player.swf',\n\n        init: function () {\n            var flashvars = {\n                'type': 'drawpanel'\n            };\n            var params = {\n                allowFullscreen: 'true',\n                allowScriptAccess: 'always',\n                wmode: 'transparent'\n            };\n            var attributes = {};\n\n            if (!MobileLive.isIPad() && !MobileLive.isIPhone() && !MobileLive.isAndroid() && !MobileLive.isWindowsPhone()) {\n                //开启极速动画模式\n                if (!DWDpc.fastMode) {\n                    swfobject.embedSWF(this.swfUrl, this.id, this.getWidth(), this.getHeight(), '10.0.0', '/flash/expressInstall.swf', flashvars, params, attributes);\n                }\n\n            }\n        },\n\n        getSwf: function () {\n            if (!this.isReady) {\n                return;\n            }\n\n            return swfobject.getObjectById(this.id);\n        },\n\n        clear: function () {\n            var swf = this.getSwf();\n            if (!swf) {\n                return;\n            }\n            swf._streamEnd();\n\n            Pusher.pagechangedata = [];\n            Pusher.drawjson = [];\n        },\n\n        // 画图\n        draw: function (j) {\n            var swf = this.getSwf();\n            if (!swf) {\n                return;\n            }\n            swf.draw(j);\n        },\n\n        draws: function (js) {\n            var swf = this.getSwf();\n            if (!swf) {\n                return;\n            }\n\n            (function (jstr) {\n                setTimeout(function () {\n                    swf.drawList(jstr);\n                });\n            })(js);\n        },\n\n        // 翻页\n        filp: function (j) {\n            var swf = this.getSwf();\n            if (!swf) {\n                return;\n            }\n\n            var documentDisplayMode = DWLive.documentDisplayMode;\n            if (documentDisplayMode == 1) {\n                this.displayMode = 'auto';\n            } else if (documentDisplayMode == 2) {\n                this.displayMode = 'width';\n            } else {\n                this.displayMode = 'auto';\n            }\n\n            if (live.adapt !== undefined) {\n                this.displayMode = live.adapt ? 'auto' : 'width';\n            }\n\n            var jj = JSON.parse(j);\n            var u = jj.url;\n            var isHttps = window.location.protocol === 'https:';\n            if (isHttps) {\n                jj.url = u.replace(/http:/g, 'https:');\n            }\n\n            swf.filp(JSON.stringify(jj), this.displayMode);\n\n        },\n\n        // 动画\n        animationFilp: function (j) {\n            var swf = this.getSwf();\n            if (!swf) {\n                return;\n            }\n\n            swf.animation(j);\n        },\n\n\n        // 弹幕\n        barrage: function (m) {\n            if (!m) {\n                return;\n            }\n\n            if (!this.getSwf()) {\n                return;\n            }\n\n            if (this.getSwf()._jsTOASbarrage) {\n                this.getSwf()._jsTOASbarrage(m);\n            }\n        },\n\n        // 显示跑马灯功能\n        showMarquee: function (marquee) {\n            if (!marquee) {\n                return;\n            }\n\n            if (!this.getSwf()) {\n                return;\n            }\n\n            this.getSwf().showMarqueeLight(marquee);\n        }\n    };\n\n\n    var draws = [];\n    var pageChanges = [];\n    var animations = [];\n    var isHistoryReady = false;\n\n    // 历史数据\n    var History = function () {\n        $.ajax({\n            url: '//view.csslcloud.net/api/view/info?userid=' + DWLive.userid + '&roomid=' + DWLive.roomid,\n            type: 'GET',\n            dataType: 'jsonp',\n            success: function (data) {\n                if (!data.success) {\n                    return;\n                }\n\n                if (!data.datas) {\n                    return;\n                }\n                var datas = data.datas;\n\n                var meta = datas.meta;\n                if (!meta) {\n                    return;\n                }\n\n                LivePlayer.isPublishing = meta.isPublishing;\n\n                // 没有推流\n                if (meta.isPublishing != 1) {\n                    return;\n                }\n\n                var answers = meta.answer ? meta.answer : [];\n                var questions = meta.question ? meta.question : [];\n                var broadcasts = meta.broadcast ? meta.broadcast : [];\n                for (var i = 0; i < answers.length; i++) {\n                    var answer = answers[i];\n                    for (var ii = 0; ii < questions.length; ii++) {\n                        var question = questions[ii];\n                        if (question.encryptId == answer.encryptId) {\n                            answer.questionUserId = question.questionUserId;\n                        }\n                    }\n                }\n\n                if (questions && questions.length) {\n                    for (var i = 0; i < questions.length; i++) {\n                        var question = questions[i];\n                        if (typeof DWLive.onQuestion === 'function') {\n                            DWLive.onQuestion(JSON.stringify({\n                                'action': 'question',\n                                'value': {\n                                    'id': question.encryptId,\n                                    'content': question.content,\n                                    'userId': question.questionUserId,\n                                    'userName': question.questionUserName,\n                                    'isPublish': question.isPublish,\n                                    'triggerTime': question.triggerTime,\n                                    'userAvatar': question.userAvatar\n                                }\n                            }));\n                        }\n                    }\n                }\n\n                if (answers && answers.length) {\n                    for (var i = 0; i < answers.length; i++) {\n                        var answer = answers[i];\n                        if (typeof DWLive.onAnswer === 'function') {\n                            DWLive.onAnswer(JSON.stringify({\n                                'action': 'answer',\n                                'value': {\n                                    'questionId': answer.encryptId,\n                                    'isPrivate': answer.isPrivate,\n                                    'content': answer.content,\n                                    'userId': answer.answerUserId,\n                                    'userName': answer.answerUserName,\n                                    'questionUserId': answer.questionUserId,\n                                    'triggerTime': answer.triggerTime,\n                                    'userAvatar': answer.userAvatar\n                                }\n                            }));\n                        }\n                    }\n                }\n\n                if (broadcasts && broadcasts.length) {\n                    for (var i = 0; i < broadcasts.length; i++) {\n                        var broadcast = broadcasts[i];\n                        if (typeof DWLive.onBroadcastMsg == 'function') {\n                            DWLive.onBroadcastMsg({\n                                content: broadcast.content,\n                                time: broadcast.time\n                            });\n                        }\n                    }\n                }\n\n                if (MobileLive.isMobile() == 'isMobile' && $.DrawingBoard) {\n                    $.DrawingBoard.history(meta);\n                }\n\n                //极速动画获取历史信息\n                DWDpc.history(meta);\n\n                var chatLogs = meta.chatLog;\n                if (chatLogs && chatLogs.length) {\n                    var cls = [];\n                    for (var i = 0; i < chatLogs.length; i++) {\n                        var chatLog = chatLogs[i];\n\n                        cls.push({\n                            'userid': chatLog.userId,\n                            'username': chatLog.userName,\n                            'userrole': chatLog.userRole,\n                            'useravatar': chatLog.userAvatar,\n                            'msg': chatLog.content,\n                            'time': '',\n                            'usercustommark': chatLog.userCustomMark\n                        });\n                    }\n\n                    if (typeof DWLive.onPublicChatMessage === 'function') {\n                        for (var idx = 0; idx < cls.length; idx++) {\n                            DWLive.onPublicChatMessage(JSON.stringify(cls[idx]));\n                        }\n                    }\n                }\n\n                if (!DWDpc.fastMode) {\n                    var pageChange = meta.pageChange;\n                    if (pageChange && pageChange.length) {\n                        pageChange.sort(function (p1, p2) {\n                            return parseInt(p1.time) - parseInt(p2.time);\n                        });\n                        var lastPage = pageChange.pop();\n                        pageChanges.push(JSON.stringify({\n                            'fileName': lastPage.docName,\n                            'totalPage': lastPage.docTotalPage,\n                            'docid': lastPage.encryptDocId,\n                            'url': lastPage.url,\n                            'page': lastPage.pageNum,\n                            'time': lastPage.time,\n                            'useSDK': lastPage.useSDK\n                        }));\n                    }\n\n                    var animation = meta.animation;\n                    if (animation && animation.length) {\n                        animation.sort(function (p1, p2) {\n                            return parseInt(p1.time) - parseInt(p2.time);\n                        });\n                        var lastAnimation = animation.pop();\n                        animations.push(JSON.stringify({\n                            'fileName': lastAnimation.docName,\n                            'totalPage': lastAnimation.docTotalPage,\n                            'docid': lastAnimation.encryptDocId,\n                            'url': lastAnimation.url,\n                            'page': lastAnimation.pageNum,\n                            'time': lastAnimation.time,\n                            'step': lastAnimation.step\n                        }));\n                    }\n\n                    var draw = meta.draw;\n                    if (draw && draw.length) {\n                        for (var i = 0; i < draw.length; i++) {\n                            draws.push(draw[i].data);\n                        }\n                    }\n                }\n\n                isHistoryReady = true;\n            }\n        });\n    };\n\n\n    var opts = {\n        // 互动信息\n        interaction: {\n            id: 'interactionPlayer',\n            width: '100%',\n            height: '100%'\n        }\n    };\n    var Live = function (opts) {\n        this.interaction = new Interaction(opts);\n    };\n    var live = new Live(opts);\n\n\n    window.on_drampanel_ready = function () {\n        // 画板Flash加载完成回调\n        DrawPanel.isReady = true;\n        setTimeout(function () {\n            initDrawPanelInfo();\n        }, 1500);\n    };\n\n\n    // 画图事件\n    window.on_cc_live_dw_draw = function (data) {\n        setTimeout(function () {\n            DWDpc.draw(data);\n        }, getDeltaTime());\n        setTimeout(function () {\n            var j = toJson(data);\n            DrawPanel.draw(JSON.stringify(j.value.data));\n        }, getDeltaTime());\n        if (MobileLive.isMobile() == 'isMobile') {\n            setTimeout(function () {\n                $.DrawingBoard && $.DrawingBoard.db(data);\n            }, getDeltaTime());\n        }\n    };\n\n    // 翻页事件\n    window.on_cc_live_dw_page_change = function (data) {\n        //极速动画\n        setTimeout(function () {\n            DWDpc.pageChange(data);\n        }, getDeltaTime());\n        //flash\n        setTimeout(function () {\n            var j = toJson(data);\n            DrawPanel.filp(JSON.stringify(j.value));\n        }, getDeltaTime());\n        //canvas\n        if (MobileLive.isMobile() == 'isMobile') {\n            setTimeout(function () {\n                $.DrawingBoard && $.DrawingBoard.db(data);\n            }, getDeltaTime());\n        }\n    };\n\n    // 动画翻页事件\n    window.on_cc_live_dw_animation_change = function (data) {\n        setTimeout(function () {\n            DWDpc.animationChange(data);\n        }, getDeltaTime());\n        setTimeout(function () {\n            var j = toJson(data);\n            DrawPanel.animationFilp(JSON.stringify(j.value));\n        }, getDeltaTime());\n        if (MobileLive.isMobile() == 'isMobile') {\n            setTimeout(function () {\n                $.DrawingBoard && $.DrawingBoard.db(data);\n            }, getDeltaTime());\n        }\n    };\n\n\n    // Chat\n    var Chat = {\n        init: function () {\n            Pusher.socket.on('chat_message', function (j) {\n                if (typeof DWLive.onPublicChatMessage === 'function') {\n                    DWLive.onPublicChatMessage(j);\n                }\n            });\n\n            // 消息提醒\n            Pusher.socket.on('notification', function (j) {\n                if (typeof DWLive.onNotification === 'function') {\n                    DWLive.onNotification(j);\n                }\n            });\n\n            Pusher.socket.on('information', function (j) {\n                if (typeof DWLive.onInformation === 'function') {\n                    DWLive.onInformation(j);\n                }\n            });\n\n            // 接收发送私聊函数\n            Pusher.socket.on('private_chat_self', function (j) {\n                if (typeof DWLive.onPrivateChatMessage === 'function') {\n                    DWLive.onPrivateChatMessage(j);\n                }\n            });\n\n            // 接收回答私聊函数\n            Pusher.socket.on('private_chat', function (j) {\n                if (typeof DWLive.onPrivateAnswer === 'function') {\n                    DWLive.onPrivateAnswer(j);\n                }\n            });\n\n            // 在线列表\n            Pusher.socket.on('room_context', function (msg) {\n\n            });\n\n            // 自定义消息\n            Pusher.socket.on('custom_message', function (j) {\n                if (typeof DWLive.onCustomChatMessage === 'function') {\n                    DWLive.onCustomChatMessage(j);\n                }\n            });\n        }\n    };\n\n    // Qa\n    var Qa = {\n        init: function () {\n\n            // 问答->提交问题\n            Pusher.socket.on('question', function (j) {\n                if (typeof DWLive.onQuestion === 'function') {\n                    DWLive.onQuestion(j);\n                }\n                if (typeof DWLive.onQuestionSend === 'function') {\n                    DWLive.onQuestionSend(j);\n                }\n            });\n\n            // 问答->返回答案\n            Pusher.socket.on('answer', function (j) {\n                if (typeof DWLive.onAnswer === 'function') {\n                    DWLive.onAnswer(j);\n                }\n                if (typeof DWLive.onAnswerSend === 'function') {\n                    DWLive.onAnswerSend(j);\n                }\n            });\n        }\n    };\n\n    //事件兼容处理\n    var Event = {};\n    Event.addEvents = function (target, eventType, handle) {\n        if (document.addEventListener) {\n            Event.addEvents = function (target, eventType, handle) {\n                target.addEventListener(eventType, handle, false);\n            };\n        } else {\n            Event.addEvents = function (target, eventType, handle) {\n                target.attachEvent('on' + eventType, function () {\n                    handle.call(target, arguments);\n                });\n            };\n        }\n        ;\n        Event.addEvents(target, eventType, handle);\n    };\n\n    var MobileLive = {\n\n        src: '',\n        audio: false,\n        line: 0,\n\n        init: function () {\n            var _this = this;\n            $.ajax({\n                url: '//zeus.csslcloud.net/api/hls/play',\n                type: 'GET',\n                dataType: 'json',\n                data: {roomid: DWLive.roomid, userid: DWLive.userid},\n                success: function (data) {\n                    var status = data.live.status;\n                    if (status == 0) {\n                        _this.m3u8 = data.live.m3u8;\n                        _this.src = data.live.m3u8;\n\n                        _this.secureHosts = data.live.secureHosts || [];\n                        _this.audioM3u8 = data.live.audioM3u8 || [];\n                        _this.audioSecureHosts = data.live.audioSecureHosts || [];\n                        _this.isHttps = window.location.protocol === 'https:';\n                        options.init();\n                        options.liveId = data.live.liveId;\n                        if (_this.isHttps && _this.secureHosts && _this.secureHosts.length) {\n                            _this.m3u8 = _this.secureHosts;\n                        }\n\n                        _this.appendVideo(_this.m3u8[0]);\n\n                        if (typeof DWLive.onLiveStarting === 'function') {\n                            DWLive.onLiveStarting();\n                        }\n\n                        //ios解禁播放失败处理\n                        var vd = $('#livePlayer>video')[0];\n                        var index = 0;\n                        var handle = function () {\n                            if (index >= 3) {\n                                vd.removeEventListener('error', handle);\n                                return;\n                            }\n                            vd.removeEventListener('error', handle);\n                            setTimeout(function () {\n                                index++;\n                                vd.src = vd.src;\n                                Event.addEvents(vd, 'error', handle, false);\n                            }, 1000);\n                        };\n\n                        Event.addEvents(vd, 'error', handle, false);\n\n                    } else {\n                        if (DWLive.isBan) {\n                            $('#livePlayer').css({\n                                'text-align': 'center',\n                                'color': 'white',\n                                'font-size': '18px',\n                                'line-height': '232px'\n                            });\n                            $('#livePlayer').html('<p>直播已封禁，请联系管理员</p>');\n                            return;\n                        }\n                    }\n\n                }\n            });\n        },\n\n        appendVideo: function (s) {\n            var v = '<video id=\"player_live\" webkit-playsinline playsinline controls autoplay x-webkit-airplay=\"allow\" x5-playsinline width=\"100%\" height=\"100%\" src=\"' + s + '\"></video>';\n            $('#' + LivePlayer.id).html(v);\n            var video = document.getElementById('player_live');\n            DWLive.onKickOut = function () {\n                $('#' + LivePlayer.id).html('');\n            };\n            this.report = new ReportLog(options, 1, 11, video, true);\n        },\n\n        ban: function () {\n            $('#livePlayer').css({\n                'text-align': 'center',\n                'color': 'white',\n                'font-size': '18px',\n                'line-height': '232px'\n            });\n            $('#livePlayer').html('<p>直播已封禁，请联系管理员</p>');\n        },\n\n        unban: function () {\n            $('#livePlayer').css({\n                'text-align': '',\n                'color': '',\n                'font-size': '',\n                'line-height': ''\n            });\n            this.init();\n        },\n\n        end: function () {\n            $('#' + LivePlayer.id).html('');\n            this.report.stopTimer();\n        },\n\n        appendDoc: function (s) {\n            var isHttps = window.location.protocol === 'https:';\n            if (isHttps) {\n                s = s.replace(/http:/g, 'https:');\n            }\n\n            var img = '<img src=\"' + s + '\" />';\n            $('#' + DrawPanel.id).html(img);\n        },\n\n        changeLine: function (line) {\n            $('#' + LivePlayer.id).find('video').attr('src', this.m3u8[line]);\n            this.line = line;\n\n            if (MobileLive.audio) {\n                audio.src = '';\n                audio.src = this.m3u8[this.line];\n                audio.play();\n            }\n        },\n\n        onlyAudio: function () {\n            var v = $('#' + LivePlayer.id).find('video');\n            MobileLive.audio = !MobileLive.audio;\n            if (MobileLive.audio) {\n                if (this.isHttps && this.audioSecureHosts && this.audioSecureHosts.length) {\n                    this.m3u8 = this.audioSecureHosts;\n                } else {\n                    this.m3u8 = this.audioM3u8;\n                }\n                audio = new Audio();\n                audio.src = this.m3u8[this.line];\n                audio.play();\n            } else {\n                if (this.isHttps && this.secureHosts && this.secureHosts.length) {\n                    this.m3u8 = this.secureHosts;\n                } else {\n                    this.m3u8 = this.src;\n                }\n                audio.src = '';\n                v.attr('src', this.m3u8[this.line]);\n            }\n        },\n\n        isMobile: function () {\n            if (this.isIPad() || this.isIPhone() || this.isAndroid() || this.isWindowsPhone()) {\n                return 'isMobile';\n            }\n        },\n\n        isIPad: function () {\n            return navigator.userAgent.match(/iPad/i) != null;\n        },\n\n        isIPhone: function () {\n            return navigator.userAgent.match(/iPhone/i) != null;\n        },\n\n        isAndroid: function () {\n            return navigator.userAgent.match(/Android/i) != null;\n        },\n\n        isWindowsPhone: function () {\n            return navigator.userAgent.match(/Windows Phone/i) != null;\n        }\n\n    };\n\n    // 接受语音互动请求\n    window.on_cc_live_accept_interaction = function (data) {\n        DWLive.closeSound();\n\n        // 清除请求超时计时器\n        live.interaction.clearRequestTimeoutTimer();\n\n        DWLive.enterInteractionRoom();\n\n        live.interaction.isInteractioning = true;\n\n        live.interaction.setCallingTimer();\n\n        if (typeof window.on_cc_live_interaction_accept === 'function') {\n            window.on_cc_live_interaction_accept(live.interaction.local.type, toJson(data));\n        }\n    };\n\n    // 主动连接语音聊天信息\n    window.on_cc_live_interaction_chatusers = function (data) {\n        data = toJson(data);\n        $.each(data, function (index, chatuser) {\n            if (chatuser.id == DWLive.viewerid) {\n                return true;\n            }\n\n            // 客户端只是和主播进行语音互动\n            if (chatuser.role == 'publisher' && !chatuser.isMainSpeaker) {\n                return true;\n            }\n\n            live.interaction.createOfferPeerConnection(chatuser);\n        });\n\n    };\n\n    // 接收互动信息\n    window.on_cc_live_interaction_message = function (d) {\n        var d = toJson(d);\n\n        debug('Interaction', 'rtc互动信息:' + JSON.stringify(d));\n\n        var toId = d.toid;\n        var fromId = d.fromid;\n        var fromName = d.fromname;\n        var type = d.type;\n        var data = d.data;\n        if (typeof data === 'string') {\n            data = JSON.parse(data);\n        }\n\n        var event = d.event;\n\n        if (event === 'offer') {\n            data.type = event;\n\n            live.interaction.createAnswerPeerConnection({\n                id: fromId,\n                name: fromName,\n                type: type\n            });\n\n            var pc = live.interaction.usersPcs[fromId].pc;\n            if (!pc) {\n                return;\n            }\n\n            pc.setRemoteDescription(new nativeRTCSessionDescription(data));\n            pc.createAnswer(function () {\n            }, function (error) {\n                debug('Interaction', 'Failure callback: ' + error);\n            });\n\n        } else if (event === 'answer') {\n            var pc = live.interaction.usersPcs[fromId].pc;\n            if (!pc) {\n                return;\n            }\n\n            data.type = event;\n\n            debug('Interaction', 'answer spark_message信息:' + data);\n            pc.setRemoteDescription(new nativeRTCSessionDescription(data));\n\n            pc.receivedAnswer = true;\n            if (!pc.hasAddIce && pc.RTCICE) {\n                pc.addIceCandidate(pc.RTCICE);\n            }\n\n        } else {\n            var u = live.interaction.usersPcs[fromId];\n            if (!u) {\n                u = live.interaction.usersPcs[toId];\n            }\n            var pc = u ? u.pc : null;\n\n            if (!pc) {\n                return;\n            }\n\n            // 收到answer之后再addIce\n            var ice = new RTCIceCandidate(data);\n            if (pc.receivedAnswer) {\n                pc.hasAddIce = true;\n                pc.addIceCandidate(ice);\n            } else {\n                pc.hasAddIce = false;\n                pc.RTCICE = ice;\n            }\n\n        }\n    };\n\n    // 打印debug信息\n    var debug = function (t, d) {\n        var isDegbug = false;\n        if (!isDegbug) {\n            return;\n        }\n\n        if (console && typeof console.log === 'function') {\n            console.log(t, d);\n        }\n    };\n\n    function toJson(data) {\n        if (typeof data === 'string') {\n            try {\n                return JSON.parse(data);\n            } catch (e) {\n                return {};\n            }\n        }\n\n        return data;\n    }\n\n    window.DWLive = DWLive;\n    window.live = live;\n\n    // live player ready\n    window._swfInit = function () {\n        if (typeof window.on_cc_live_player_ready === 'function') {\n            window.on_cc_live_player_ready();\n        }\n    };\n\n    /**\n     * Flash 加载完成\n     * */\n    window._swfOk = function (id) {\n        if (typeof window.on_cc_swf_loading_completed === 'function') {\n            window.on_cc_swf_loading_completed(id);\n        }\n    };\n\n    function getDeltaTime() {\n        var b = LivePlayer.delay;\n        if (isNaN(b) || b < 0) {\n            b = 0;\n        }\n        b = b * 1000;\n\n        // 低延迟\n        if (MobileLive.isMobile() == 'isMobile') {\n            if (b === 0) {\n                return 5000;\n            } else {\n                return 10000;\n            }\n        } else {\n            if (b === 0) {\n                return 1300;\n            } else {\n                return 3000;\n            }\n        }\n    }\n\n})(window);\n\n\n// WEBPACK FOOTER //\n// ./js/liveSDK.js","/**\n * CC playback video\n * v2.4.2 2018/10/09\n */\n!(function ($, window, document) {\n\n    // 直播播放器信息\n    var CallbackPlayer = function (opts) {\n        this.isReady = false;\n        this.isPublishing = 0;\n        this.id = opts.callbackPlayer.id;\n\n        var swfUrl = '//player.csslcloud.net/platform/live/CallbackPlayer.swf';\n        var flashvars = {\n            'userid': opts.userId,\n            'videoid': opts.videoId,\n            'recordid': opts.recordId,\n            'isShowBar': opts.isShowBar,\n            'upid': opts.upId,\n            'viewerid': opts.viewerId,\n            'roomid': opts.roomId,\n            'ua': '1'\n        };\n        var params = {\n            allowFullscreen: 'true',\n            allowScriptAccess: 'always',\n            wmode: 'transparent'\n        };\n\n        this.flashPlayerInit = function () {\n            swfobject.embedSWF(swfUrl, opts.callbackPlayer.id, opts.callbackPlayer.width, opts.callbackPlayer.height, '10.0.0',\n                '/flash/expressInstall.swf', flashvars, params);\n            if (MobileLive.isMobile() != 'isMobile') {\n                var report = new ReportLog(opts, 0, 1, null, false);\n            }\n        };\n\n        if (!DW.isH5play) {\n            this.flashPlayerInit();\n        }\n\n        this.getFlash = function () {\n            return swfobject.getObjectById(this.id);\n        };\n\n        this.playbackRate = function (t) {\n            if (!DW.isH5play && MobileLive.isMobile() !== 'isMobile') {\n                return;\n            }\n            var t = parseFloat(t);\n            this.getH5player().playbackRate = t;\n        };\n\n        this.seek = function (t) {\n            if (t < 0) {\n                return;\n            }\n            if (DW.isH5play || MobileLive.isMobile() == 'isMobile') {\n                this.getH5player().currentTime = t;\n            } else {\n                var swf = this.getFlash();\n                if (!swf) {\n                    return;\n                }\n                swf.seek(t);\n            }\n        };\n\n        this.getFlash = function () {\n            return swfobject.getObjectById(this.id);\n        };\n\n        this.getH5player = function () {\n            return $('#playbackVideo')[0];\n        };\n\n        this.getPlayerTime = function () {\n            if (!this.isReady) {\n                return 0;\n            }\n            var t;\n            if (DW.isH5play || MobileLive.isMobile() == 'isMobile') {\n                t = this.getH5player().currentTime;\n            } else {\n                t = parseInt(this.getFlash().getPosition(), 10);\n            }\n            if (isNaN(t) || t < 0) {\n                return 0;\n            }\n\n            return t;\n        };\n\n        this.getDuration = function () {\n            if (DW.isH5play || MobileLive.isMobile() == 'isMobile') {\n                return this.getH5player().duration;\n            } else {\n                var swf = this.getFlash();\n                if (!swf) {\n                    return;\n                }\n                return swf.getDuration();\n            }\n        };\n\n        this.getBuffer = function () {\n\n            if (DW.isH5play || MobileLive.isMobile() == 'isMobile') {\n                return this.getH5player().buffered.end(0);\n            } else {\n                var swf = this.getFlash();\n                if (!swf) {\n                    return;\n                }\n                return swf.getBufferLength();\n            }\n\n        };\n\n        this.setVolume = function (n) {\n            if (DW.isH5play || MobileLive.isMobile() == 'isMobile') {\n                this.getH5player().volume = parseFloat(n);\n            } else {\n                var swf = this.getFlash();\n                if (!swf) {\n                    return;\n                }\n                return swf.setVolume(n);\n            }\n        };\n\n        this.getVolume = function () {\n            if (DW.isH5play || MobileLive.isMobile() == 'isMobile') {\n                return this.getH5player().volume;\n            } else {\n                var swf = this.getFlash();\n                if (!swf) {\n                    return;\n                }\n                return swf.getVolume();\n            }\n        };\n\n        this.play = function () {\n            if (DW.isH5play || MobileLive.isMobile() == 'isMobile') {\n                if (MobileLive.pauseState) {\n                    this.getH5player().play();\n                } else {\n                    this.getH5player().pause();\n                }\n            } else {\n                var swf = this.getFlash();\n                if (!swf) {\n                    return;\n                }\n                return swf.isPlay();\n            }\n        };\n\n        this.setZScale = function (s) {\n            var swf = this.getFlash();\n            if (!swf) {\n                return;\n            }\n            return swf.setZScale(s);\n        };\n\n        this.getZScale = function () {\n            var swf = this.getFlash();\n            if (!swf) {\n                return;\n            }\n            return swf.getZScale();\n        };\n\n        this.setScale = function (s) {\n            var swf = this.getFlash();\n            if (!swf) {\n                return;\n            }\n            return swf.setScale(s);\n        };\n\n        this.getScale = function () {\n            var swf = this.getFlash();\n            if (!swf) {\n                return;\n            }\n            return swf.getScale();\n        };\n\n        this.openSettingPanel = function () {\n            var swf = this.getFlash();\n            if (!swf) {\n                return;\n            }\n            return swf.openSettingPanel();\n        };\n    };\n\n\n    var Socket = function (opts) {\n\n        var isHttps = window.location.protocol === 'https:';\n        var host = opts.chat.host;\n        if (isHttps && host && host.indexOf(':')) {\n            var s = host.split(':');\n            if (s.length == 2) {\n                var port = parseInt(s[1]);\n                if (!isNaN(port)) {\n                    var httpsPort = port + 400;\n                    host = s[0] + ':' + httpsPort;\n                }\n            }\n        }\n\n        var terminal = 0;\n        if (MobileLive.isMobile() == 'isMobile') {\n            terminal = 1;\n        }\n\n        var socket = io.connect(document.location.protocol + '//' + host + '/replay', {\n            query: {\n                roomid: opts.roomId,\n                sessionid: opts.viewer.sessionId,\n                platform: 1,\n                terminal: terminal\n            }\n        });\n    };\n\n    var DrawPanel = function (opts, callbackPlayer) {\n        this.isReady = false;\n\n        var swfUrl = '//zeus.csslcloud.net/flash/Player.swf';\n\n        var flashvars = {\n            'type': 'drawpanel'\n        };\n        var params = {\n            allowFullscreen: 'true',\n            allowScriptAccess: 'always',\n            wmode: 'transparent'\n        };\n        var attributes = {};\n\n        if (!DWDpc.fastMode) {\n            swfobject.embedSWF(swfUrl, opts.drawPanel.id, opts.drawPanel.width, opts.drawPanel.height,\n                '10.0.0', '/flash/expressInstall.swf', flashvars, params, attributes);\n        }\n\n        this.getFlash = function () {\n            if (!this.isReady) {\n                return;\n            }\n\n            return swfobject.getObjectById(opts.drawPanel.id);\n        };\n\n        this.clear = function () {\n            DWDpc.clear();\n            var swf = this.getFlash();\n            if (!swf) {\n                return;\n            }\n            swf.clear();\n        };\n\n        // 画图\n        this.draw = function (j) {\n            DWDpc.draw(j);\n\n            var swf = this.getFlash();\n            if (!swf) {\n                return;\n            }\n\n            swf.draw(j);\n        };\n\n        this.draws = function (js) {\n            var swf = this.getFlash();\n            if (!swf) {\n                return;\n            }\n\n            (function (jstr) {\n                setTimeout(function () {\n                    swf.drawList(jstr);\n                });\n            })(js);\n        };\n\n\n        // 翻页\n        this.filp = function (j) {\n            DWDpc.pageChange(j);\n\n            var swf = this.getFlash();\n            if (!swf) {\n                return;\n            }\n\n            var jj = JSON.parse(j);\n            var u = jj.url;\n            var isHttps = window.location.protocol === 'https:';\n            if (isHttps) {\n                jj.url = u.replace(/http:/g, 'https:');\n            }\n\n            if (options.adapt) {\n                swf.filp(JSON.stringify(jj), 'auto');\n            } else {\n                swf.filp(JSON.stringify(jj));\n            }\n        };\n\n        // 动画\n        this.animation = function (j) {\n            DWDpc.animationChange(j);\n\n            var swf = this.getFlash();\n            if (!swf) {\n                return;\n            }\n\n            swf.animation(j);\n        };\n\n        this.intervalNum = 0;\n\n        // 循环更新翻页和画板信息\n        this.interval = function () {\n\n            var ft = 0;\n            try {\n                ft = callback.callbackPlayer.getPlayerTime();\n            } catch (e) {\n            }\n            if (ft < 0) {\n                return;\n            }\n\n            try {\n                if (callback.animations && callback.animations.length > 0) {\n                    if (callback.animationIndex < callback.animations.length) {\n                        var pidex = callback.pageChangeIndex;\n                        if (pidex >= 0) {\n                            var pc = callback.pageChanges[pidex];\n                            var a = callback.animations[callback.animationIndex + 1];\n                            if (!!pc && !!a && pc.encryptDocId == a.encryptDocId && ft >= a.time && pc.time <= a.time) {\n                                if (DWDpc.fastMode) {\n                                    this.animation(a);\n                                } else {\n                                    this.animation(JSON.stringify({\n                                        'fileName': a.docName,\n                                        'totalPage': a.docTotalPage,\n                                        'docid': a.encryptDocId,\n                                        'url': a.url,\n                                        'page': a.pageNum,\n                                        'step': a.step\n                                    }));\n                                }\n                                callback.animationIndex = callback.animationIndex + 1;\n                            }\n                        }\n                    }\n                }\n            } catch (e) {\n            }\n\n            try {\n                if (callback.pageChanges && callback.pageChanges.length > 0) {\n                    if (callback.pageChangeIndex < callback.pageChanges.length) {\n                        var pc = callback.pageChanges[callback.pageChangeIndex + 1];\n                        if (ft >= pc.time) {\n                            if (typeof window.on_cc_callback_page_change === 'function') {\n                                window.on_cc_callback_page_change(pc);\n                            }\n\n                            if (DWDpc.fastMode) {\n                                this.filp(pc);\n                            } else {\n                                this.filp(JSON.stringify({\n                                    'fileName': pc.docName,\n                                    'totalPage': pc.docTotalPage,\n                                    'docid': pc.encryptDocId,\n                                    'url': pc.url,\n                                    'page': pc.pageNum,\n                                    'useSDK': pc.useSDK\n                                }));\n                            }\n\n                            callback.pageChangeIndex = callback.pageChangeIndex + 1;\n\n                            //翻页信息回掉\n                            var obj = {};\n                            obj.docId = pc.docId;\n                            obj.docName = pc.docName;\n                            obj.docTotalPage = pc.docTotalPage;\n                            obj.pageNum = pc.pageNum;\n\n                            if (typeof window.on_cc_callback_pagechange === 'function') {\n                                window.on_cc_callback_pagechange(obj);\n                            }\n\n                        }\n                    }\n                }\n            } catch (e) {\n            }\n\n            try {\n                if (callback.animations && callback.animations.length > 0) {\n                    if (callback.animationIndex < callback.animations.length) {\n                        var pidex = callback.pageChangeIndex;\n                        if (pidex >= 0) {\n                            var pc = callback.pageChanges[pidex];\n                            var a = callback.animations[callback.animationIndex + 1];\n                            if (!!pc && !!a && pc.encryptDocId == a.encryptDocId && ft >= a.time && pc.time <= a.time) {\n                                if (DWDpc.fastMode) {\n                                    this.animation(a);\n                                } else {\n                                    this.animation(JSON.stringify({\n                                        'fileName': a.docName,\n                                        'totalPage': a.docTotalPage,\n                                        'docid': a.encryptDocId,\n                                        'url': a.url,\n                                        'page': a.pageNum,\n                                        'step': a.step\n                                    }));\n                                }\n                                callback.animationIndex = callback.animationIndex + 1;\n                            }\n                        }\n                    }\n                }\n            } catch (e) {\n            }\n\n\n            try {\n                if (callback.draws && callback.draws.length > 0) {\n                    // 画图逻辑\n                    if (callback.drawIndex < callback.draws.length) {\n                        var dc = callback.draws[callback.drawIndex + 1];\n                        while (ft >= dc.time) {\n                            if (DWDpc.fastMode) {\n                                this.draw(dc);\n                            } else {\n                                this.draw(dc.data);\n                            }\n\n                            callback.drawIndex = callback.drawIndex + 1;\n                            dc = callback.draws[callback.drawIndex + 1];\n                        }\n                    }\n                }\n            } catch (e) {\n            }\n        };\n\n        this.intervalPainting = function (callback) {\n            callback.drawPanel.intervalNum = setInterval(function () {\n                callback.drawPanel.interval(callback);\n            }, 1000);\n        };\n    };\n\n    //优化meta数据\n    var substepRequest = function (opts) {\n        $.ajax({\n            url: opts.url,\n            type: 'GET',\n            data: opts.data,\n            tryCount: 0,\n            retryLimit: 3,\n            timeout: 5000,\n            dataType: 'jsonp',\n            success: function (data) {\n                opts.done(data);\n            },\n            error: function (xhr, textStatus, errorThrown) {\n                if (textStatus == 'timeout') {\n                    this.tryCount++;\n                    if (this.tryCount < this.retryLimit) {\n                        //try again\n                        $.ajax(this);\n                        return;\n                    } else {\n                        if (typeof opts.fn === 'function') {\n                            opts.fn(textStatus);\n                        }\n                        return;\n                    }\n                    return;\n                }\n                if (xhr.status == 500) {\n                    //handle error\n                } else {\n                    //handle error\n                }\n            }\n        });\n    };\n\n    var substepRequestHistoryData = function (opts, fn) {\n        var param = {\n            roomid: opts.roomId,\n            userid: opts.userId,\n            liveid: opts.liveId,\n            upid: opts.upId,\n            recordid: opts.recordId,\n            viewertoken: opts.viewertoken,\n            viewername: opts.viewername,\n            forcibly: opts.forcibly\n        };\n\n        var sub = {\n            globalData: {},\n            requestLoginData: false,\n            requestInfoData: false,\n            requestDrawData: false,\n            requestChatqaData: false,\n            allRequests: 0,\n        };\n\n        // 登录\n        substepRequest({\n            url: '//view.csslcloud.net/api/room/replay/login',\n            data: param,\n            fn: window.on_cc_login_error,\n            done: function (data) {\n                if (!checkout(data, window.on_cc_login_error)) {\n                    return false;\n                }\n                concatMeta(sub.globalData, data);\n                sub.requestLoginData = true;\n                sub.requestInfoData = false;\n                sub.requestDrawData = false;\n                sub.requestChatqaData = false;\n                sub.allRequests++;\n                success(sub);\n\n                //登录成功\n\n                // 请求画笔数据\n                substepRequest({\n                    url: '//view.csslcloud.net/api/view/replay/draw/info',\n                    data: param,\n                    fn: window.on_cc_request_draw_error,\n                    done: function (data) {\n                        if (!checkout(data, window.on_cc_request_draw_error)) {\n                            return false;\n                        }\n                        concatMeta(sub.globalData, data);\n                        sub.requestLoginData = false;\n                        sub.requestInfoData = false;\n                        sub.requestDrawData = true;\n                        sub.requestChatqaData = false;\n                        sub.allRequests++;\n                        success(sub);\n                    }\n                });\n\n                // 请求聊天和问答数据\n                substepRequest({\n                    url: '//view.csslcloud.net/api/view/replay/chatqa/info',\n                    data: param,\n                    fn: window.on_cc_request_chatqa_error,\n                    done: function (data) {\n                        if (!checkout(data, window.on_cc_request_chatqa_error)) {\n                            return false;\n                        }\n                        concatMeta(sub.globalData, data);\n                        sub.requestLoginData = false;\n                        sub.requestInfoData = false;\n                        sub.requestDrawData = false;\n                        sub.requestChatqaData = true;\n                        sub.allRequests++;\n                        success(sub);\n                    }\n                });\n\n                // 广播，翻页，animation及后续新增数据\n                substepRequest({\n                    url: '//view.csslcloud.net/api/view/replay/info',\n                    data: param,\n                    fn: window.on_cc_request_info_error,\n                    done: function (data) {\n                        if (!checkout(data, window.on_cc_request_info_error)) {\n                            return false;\n                        }\n                        concatMeta(sub.globalData, data);\n                        sub.requestLoginData = false;\n                        sub.requestInfoData = true;\n                        sub.requestDrawData = false;\n                        sub.requestChatqaData = false;\n                        sub.allRequests++;\n                        success(sub);\n                    }\n                });\n\n            }\n        });\n\n\n        var checkout = function (data, fn) {\n            if (!data.success) {\n                if (typeof fn === 'function') {\n                    fn(data);\n                }\n                return false;\n            }\n\n            if (!data.datas) {\n                return false;\n            }\n\n            return true;\n        };\n\n        var concatMeta = function (d1, d2) {\n            extend(d1, d2);\n            if (!d1.datas.meta) {\n                d1.datas.meta = {};\n            }\n            extend(d1.datas.meta, d2.datas.meta);\n        };\n\n        var extend = function (o, n) {\n            for (var p in n) {\n                if (n.hasOwnProperty(p) && (!o.hasOwnProperty(p) ))\n                    o[p] = n[p];\n            }\n        };\n\n        var success = function (sub) {\n            fn(sub);\n        };\n\n    };\n\n    // 历史数据\n    var History = function (opts, callback) {\n\n        substepRequestHistoryData(opts, success);\n\n        //canplay\n        var onCCH5PlayerLoad = false;\n\n        function success(sub) {\n\n            var data = sub.globalData;\n\n            if (sub.requestLoginData) {\n\n                if (DWDpc.fastMode) {\n                    $('#documentDisplayMode').val(data.datas.room.documentDisplayMode);\n                    DWDpc.appendDrawPanel();\n                    DWDpc.init();\n                }\n\n                opts.chat = {\n                    host: data.datas.pusherNode.primary\n                };\n                opts.viewer.sessionId = data.datas.sessionId;\n                opts.liveId = data.datas.encryptLiveId;\n                opts.upId = data.datas.upId;\n                opts.viewerId = data.datas.viewer.id;\n                callback.socket = new Socket(opts);\n\n                if (typeof window.on_cc_callback_player === 'function') {\n                    window.on_cc_callback_player(data.datas.live.encryptRecordvideoId);\n                }\n\n                if (DW.isH5play) {\n                    MobileLive.init(opts);\n                } else if (MobileLive.isMobile() == 'isMobile') {\n                    MobileLive.init(opts);\n                }\n            }\n\n            var datas = data.datas;\n            var meta = datas.meta;\n            if (!meta) {\n                return;\n            }\n\n            if (sub.requestInfoData) {\n                var pages = meta.pageChange;\n\n                for (var i = 0; i < pages.length; i++) {\n                    var imgUrl = pages[i].url;\n                    var isHttps = window.location.protocol === 'https:';\n                    if (imgUrl.indexOf('//') > 0 && isHttps) {\n                        imgUrl = imgUrl.replace('http:', 'https:');\n                        pages[i].url = imgUrl;\n                    }\n                }\n\n                if (typeof window.on_cc_callback_pages === 'function') {\n                    window.on_cc_callback_pages(pages);\n                }\n\n                var pageChanges = meta.pageChange;\n                if (pageChanges && pageChanges.length) {\n                    pageChanges.sort(function (p1, p2) {\n                        return parseInt(p1.time) - parseInt(p2.time);\n                    });\n                    callback.pageChanges = pageChanges;\n                }\n\n                var animations = meta.animation;\n                if (animations && animations.length) {\n                    animations.sort(function (p1, p2) {\n                        return parseInt(p1.time) - parseInt(p2.time);\n                    });\n                    callback.animations = animations;\n                }\n\n                //广播\n                var broadcasts = meta.broadcast;\n                window.chatLogs = meta.broadcast;\n                if (broadcasts && broadcasts.length) {\n                    broadcasts.sort(function (p1, p2) {\n                        return parseInt(p1.time) - parseInt(p2.time);\n                    });\n                    for (var i = 0; i < broadcasts.length; i++) {\n                        var broadcast = broadcasts[i];\n                        if (typeof window.on_cc_live_broadcast_msg == 'function') {\n                            window.on_cc_live_broadcast_msg({\n                                content: broadcast.content,\n                                time: broadcast.time\n                            });\n                        }\n                    }\n                    callback.broadcasts = broadcasts;\n                }\n            }\n\n            if (sub.requestChatqaData) {\n                var questions = meta.question;\n                if (questions && questions.length) {\n                    questions.sort(function (p1, p2) {\n                        return parseInt(p1.time) - parseInt(p2.time);\n                    });\n                    callback.questions = questions;\n                    for (var i = 0; i < callback.questions.length; i++) {\n                        var question = questions[i];\n\n                        if (typeof window.on_cc_live_qa_question === 'function') {\n                            window.on_cc_live_qa_question({\n                                'action': 'question',\n                                'value': {\n                                    'id': question.encryptId,\n                                    'content': question.content,\n                                    'userId': question.questionUserId,\n                                    'userName': question.questionUserName,\n                                    'userAvatar': question.questionUserAvatar,\n                                    'isPublish': question.isPublish\n                                }\n                            });\n                        }\n                    }\n                }\n\n                var answers = meta.answer;\n                if (answers && answers.length) {\n                    answers.sort(function (p1, p2) {\n                        return parseInt(p1.time) - parseInt(p2.time);\n                    });\n                    callback.answers = answers;\n\n                    for (var i = 0; i < callback.answers.length; i++) {\n                        var answer = answers[i];\n\n                        if (typeof window.on_cc_live_qa_answer === 'function') {\n                            window.on_cc_live_qa_answer({\n                                'action': 'answer',\n                                'value': {\n                                    'questionId': answer.encryptId,\n                                    'content': answer.content,\n                                    'userId': answer.answerUserId,\n                                    'isPrivate': answer.isPrivate,\n                                    'userName': answer.answerUserName,\n                                    'userAvatar': answer.answerUserAvatar,\n                                    'userRole': answer.answerUserRole\n                                }\n                            });\n                        }\n                    }\n                }\n\n                var chatLogs = meta.chatLog;\n                window.chatLogs = meta.chatLog;\n                if (chatLogs && chatLogs.length) {\n                    chatLogs.sort(function (p1, p2) {\n                        return parseInt(p1.time) - parseInt(p2.time);\n                    });\n                    for (var i = 0; i < chatLogs.length; i++) {\n                        var chatLog = chatLogs[i];\n                        if (typeof window.on_cc_live_chat_msg === 'function') {\n                            window.on_cc_live_chat_msg({\n                                userid: chatLog.userId,\n                                username: chatLog.userName,\n                                time: chatLog.time,\n                                msg: chatLog.content,\n                                useravatar: chatLog.userAvatar,\n                                userRole: chatLog.userRole,\n                                usercustommark: chatLog.userCustomMark\n                            });\n                        }\n                    }\n                    callback.chatLogs = chatLogs;\n                }\n\n                if (window.chatLogs && window.chatLogs.length) {\n                    window.CHATLOGS = window.chatLogs;\n                    cc_live_callback_chat_interval();\n                }\n\n                if (window.broadcasts && window.broadcasts.length) {\n                    //广播\n                    window.BROADCASTS = window.broadcasts;\n                    cc_live_callback_broadcasts_interval();\n                }\n            }\n\n            if (sub.requestDrawData) {\n                var draws = meta.draw;\n                if (draws && draws.length) {\n                    callback.draws = draws;\n                }\n\n                callback.isHistoryReady = true;\n\n                callback.drawPanel.isReady = true;\n                setTimeout(function () {\n                    initDrawPanelInfo();\n                }, 1500);\n            }\n\n            window.on_cc_h5_player_load = function () {\n                callback.callbackPlayer.isReady = true;\n                if (onCCH5PlayerLoad) {\n                    return;\n                }\n                onCCH5PlayerLoad = true;\n\n                var playbackPanel = document.getElementById('drawPanel');\n                if (playbackPanel) {\n                    $.Callback.config({playerId: 'playbackVideo'}, meta);\n                }\n\n            };\n\n        }\n\n    };\n\n    //广播\n    var BroadcastCache = function () {\n        this.cache = [];\n        this.lastTimeRefresh = new Date().getTime();\n\n        this.INTERVAL_TIME = setInterval(function () {\n            callback.broadcastCache.refresh();\n        }, 80);\n\n        //\n        this.push = function (data) {\n            // 缓存中超过5000条数据，则丢弃\n            if (this.cache.length > 5000) {\n                return;\n            }\n            this.cache.push(data);\n        };\n\n        this.ableRefresh = function () {\n            var n = new Date().getTime();\n\n            if (this.cache.length == 0) {\n                return false;\n            }\n\n            if ((n - this.lastTimeRefresh) >= 80) {\n                return true;\n            }\n            return false;\n        };\n\n        this.refresh = function () {\n            if (!this.ableRefresh()) {\n                return;\n            }\n\n            clearInterval(this.INTERVAL_TIME);\n\n            var d = [];\n            var l = Math.min(this.cache.length, 10);\n            for (var i = 0; i < l; i++) {\n                d.push(this.cache.shift());\n            }\n\n            if (typeof window.on_cc_live_broadcast_msg_sync === 'function') {\n                window.on_cc_live_broadcast_msg_sync(d);\n            }\n\n            this.lastTimeRefresh = new Date().getTime();\n\n            this.INTERVAL_TIME = setInterval(function () {\n                callback.broadcastCache.refresh();\n            }, 80);\n        };\n    };\n\n    var ChatMessageCache = function () {\n        this.cache = [];\n        this.lastTimeRefresh = new Date().getTime();\n\n        this.INTERVAL_TIME = setInterval(function () {\n            callback.chatMessageCache.refresh();\n        }, 80);\n\n        //\n        this.push = function (data) {\n            // 缓存中超过5000条数据，则丢弃\n            if (this.cache.length > 5000) {\n                return;\n            }\n            this.cache.push(data);\n        };\n\n        this.ableRefresh = function () {\n            var n = new Date().getTime();\n\n            if (this.cache.length == 0) {\n                return false;\n            }\n\n            if ((n - this.lastTimeRefresh) >= 80) {\n                return true;\n            }\n            return false;\n        };\n\n        this.refresh = function () {\n            if (!this.ableRefresh()) {\n                return;\n            }\n\n            clearInterval(this.INTERVAL_TIME);\n\n            var d = [];\n            var l = Math.min(this.cache.length, 10);\n            for (var i = 0; i < l; i++) {\n                d.push(this.cache.shift());\n            }\n\n            if (typeof window.on_cc_live_chat_msg_sync === 'function') {\n                window.on_cc_live_chat_msg_sync(d);\n            }\n\n            this.lastTimeRefresh = new Date().getTime();\n\n            this.INTERVAL_TIME = setInterval(function () {\n                callback.chatMessageCache.refresh();\n            }, 80);\n        };\n    };\n\n    var Callback = function (opts) {\n        this.chatLogs = [];\n        this.broadcasts = [];\n        this.draws = [];\n        this.pageChanges = [];\n        // 获取历史数据成功\n        this.isHistoryReady = false;\n        this.questions = [];\n        this.answers = [];\n        this.pageChanges = [];\n        this.draws = [];\n        this.animations = [];\n        this.pageChangeIndex = -1;\n        this.drawIndex = -1;\n        this.animationIndex = -1;\n\n        //this.callbackPlayer = new CallbackPlayer(opts);\n        //this.socket = new Socket(opts);\n        this.drawPanel = new DrawPanel(opts, this);\n        this.history = new History(opts, this);\n        this.chatMessageCache = new ChatMessageCache();\n        //广播\n        this.broadcastCache = new BroadcastCache();\n    };\n\n    var callback = {};\n\n    var options = {\n        userId: $('#userId').val(),\n        roomId: $('#roomId').val(),\n\n        liveId: $('#liveId').val(),\n        recordId: $('#recordId').val(),\n        videoId: $('#videoId').val(),\n        adapt: false,\n        isShowBar: 0,\n        viewerId: $('#viewerId').val(),\n        upId: $('#upId').val(),\n        // 观看者用户信息\n        viewer: {\n            id: $('#viewerId').val(),\n            name: $('#viewerName').val(),\n            role: $('#viewerRole').val(),\n            sessionId: $('#sessionId').val()\n        },\n\n        // 直播播放器信息\n        callbackPlayer: {\n            id: 'playbackPlayer',\n            width: '100%',\n            height: '100%'\n        },\n\n        // 画板信息\n        drawPanel: {\n            id: 'playbackPanel',\n            width: '100%',\n            height: '100%'\n        }\n    };\n\n    //极速文档模式\n    var DWDpc = {\n        dpc: {},\n        fastMode: false,\n        init: function () {\n            this.dpc = new Dpc();\n        },\n        appendDrawPanel: function () {\n            var dp = '<iframe id=\"dpa\" allow-scripts allowfullscreen allowusermedia frameborder=\"0\" style=\"width: 100%;height:100%;\"></iframe>';\n            if (MobileLive.isMobile() == 'isMobile') {\n                dp = '<iframe id=\"dpa\" allow-scripts allowfullscreen allowusermedia frameborder=\"0\" style=\"width: 100%;height:100%;pointer-events: none;\"></iframe>';\n            }\n            $('#playbackPanel').parent().append(dp);\n            $('div#playbackPanel').remove();\n\n            if (typeof window.on_cc_live_db_flip === 'function') {\n                window.on_cc_live_db_flip();\n            }\n        },\n        pageChange: function (pc) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.pageChange(pc);\n        },\n        animationChange: function (ac) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.animationChange(ac);\n        },\n        history: function (h) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.history(h);\n        },\n        draw: function (d) {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.draw(d);\n        },\n        clear: function () {\n            if (!this.fastMode) {\n                return;\n            }\n            this.dpc.clear();\n        }\n    };\n\n    function init(opts) {\n        options.viewerId = opts.viewerid;\n        options = $.extend(options, opts);\n        callback = new Callback(options);\n    }\n\n    var DW = {\n        isH5play: false,\n        fastMode: false,\n        setFastMode: function (opts) {\n            if (typeof opts.fastMode == 'string') {\n                if (opts.fastMode === 'false') {\n                    this.fastMode = false;\n                } else {\n                    this.fastMode = true;\n                }\n            } else if (typeof opts.fastMode == 'boolean') {\n                this.fastMode = opts.fastMode;\n            } else {\n                this.fastMode = false;\n            }\n        },\n        // 初始化DW对象\n        config: function (opts) {\n            if (checkVideo()) {\n                this.isH5play = opts.isH5play;\n            }\n\n            this.setFastMode(opts);\n            DWDpc.fastMode = this.fastMode;\n\n            var scriptArray = [\n                '//static.csslcloud.net/js/socket.io.js',\n                '//static.csslcloud.net/js/swfobject.js',\n                '//static.csslcloud.net/js/json3.min.js',\n                '//static.csslcloud.net/js/module/drawingBoard-2.0.0.js',\n                '//static.csslcloud.net/js/module/drawingBoardPlayback.js',\n                '//static.csslcloud.net/js/report.js'\n            ];\n            if (DWDpc.fastMode) {\n                scriptArray.splice(3, 2);\n            }\n\n            this.loadScript(scriptArray, function () {\n                init(opts);\n                if (MobileLive.isMobile() == 'isMobile' && $.DrawingBoard && !DWDpc.fastMode) {\n                    DW.appendDrawPanel();\n                }\n            });\n        },\n        appendDrawPanel: function () {\n            var dp = '<canvas id=\"drawPanel\" width=\"1200\" height=\"1200\" style=\"position: absolute;z-index:2;top:0;left: 0\"></canvas>'\n                + '<iframe id=\"dpa\" src=\"\" frameborder=\"0\" style=\"position: absolute;top:0;left: 0\"></iframe>';\n            $('#playbackPanel').parent().append(dp);\n            $('div#playbackPanel').remove();\n        },\n        logout: function () {\n            $.ajax({\n                url: '//view.csslcloud.net/api/callback/logout',\n                type: 'GET',\n                dataType: 'json',\n                timeout: 5000,\n                xhrFields: {\n                    withCredentials: true\n                },\n                success: function (data) {\n                },\n                error: function (xhr, status, error) {\n                }\n            });\n        },\n\n        getScript: function (url, success) {\n\n            var readyState = false,\n                script = document.createElement('script');\n            script.src = url;\n\n            script.onload = script.onreadystatechange = function () {\n                if (!readyState && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete')) {\n                    readyState = true;\n                    success && success();\n                }\n            };\n            document.body.appendChild(script);\n\n        },\n\n        loadScript: function (res, callback) {\n\n            if (typeof res === 'string') {\n                var _res = res;\n                res = [];\n                res.push(_res);\n            }\n            var _this = this,\n                queue = function (fs, cb) {\n                    _this.getScript(fs.shift(), function () {\n                        fs.length ? queue(fs, cb) : cb && cb();\n                    });\n                };\n\n            queue(res, callback);\n\n        },\n\n        playbackRate: function (t) {\n            callback.callbackPlayer.playbackRate(t);\n        },\n\n        seek: function (t) {\n            clearInterval(callback.drawPanel.intervalNum);\n            callback.callbackPlayer.seek(t);\n        },\n\n        getPlayerTime: function () {\n\n            return callback.callbackPlayer.getPlayerTime();\n\n        },\n\n        getDuration: function () {\n            if (DW.isH5play) {\n                return MobileLive.getDuration();\n            } else if (MobileLive.isMobile() == 'isMobile') {\n                return MobileLive.getDuration();\n            } else {\n                return callback.callbackPlayer.getDuration();\n            }\n        },\n\n        docAdapt: function (t) {\n            options.adapt = t;\n        },\n\n        isShowBar: function (n) {\n            options.isShowBar = n;\n        },\n\n        getBuffer: function () {\n            return callback.callbackPlayer.getBuffer();\n        },\n\n        setVolume: function (n) {\n            return callback.callbackPlayer.setVolume(n);\n        },\n\n        getVolume: function () {\n            return callback.callbackPlayer.getVolume();\n        },\n\n        play: function () {\n            return callback.callbackPlayer.play();\n        },\n\n        setZScale: function (s) {\n            return callback.callbackPlayer.setZScale(s);\n        },\n\n        getZScale: function () {\n            return callback.callbackPlayer.getZScale();\n        },\n\n        setScale: function (s) {\n            return callback.callbackPlayer.setScale(s);\n        },\n\n        getScale: function () {\n            return callback.callbackPlayer.getScale();\n        },\n\n        openSettingPanel: function () {\n            return callback.callbackPlayer.openSettingPanel();\n        }\n\n    };\n\n    $.extend({\n        DW: DW\n    });\n\n\n    function isLivePlayerReady() {\n        if (!callback.callbackPlayer.isReady) {\n            setTimeout(function () {\n                isLivePlayerReady();\n            }, 500);\n            return;\n        }\n\n        callback.drawPanel.intervalPainting(callback);\n    }\n\n    // 初始化画板数据\n    function initDrawPanelInfo() {\n        // 等待历史数据加载成功\n        if (!callback.isHistoryReady) {\n            setTimeout(function () {\n                initDrawPanelInfo();\n            }, 300);\n            return;\n        }\n\n        isLivePlayerReady();\n    }\n\n    window.on_cc_callback_player = function (videoId) {\n        options.videoId = videoId;\n        callback.callbackPlayer = new CallbackPlayer(options);\n    };\n\n    // 播放器加载完成，开始播放\n    window.on_cc_live_player_init = function () {\n        callback.callbackPlayer.isReady = true;\n        try {\n            callback.callbackPlayer.getFlash().start();\n        } catch (e) {\n        }\n        // 同时开始实时显示聊天信息\n        setInterval(function () {\n            var ft = 0;\n            try {\n                ft = callback.callbackPlayer.getPlayerTime();\n            } catch (e) {\n            }\n            if (ft <= 0) {\n                return;\n            }\n\n            if (!callback.chatLogs.length) {\n                return;\n            }\n\n            var chatLog = callback.chatLogs[0];\n            while (chatLog.time <= ft) {\n                chatLog = callback.chatLogs.shift();\n\n                callback.chatMessageCache.push({\n                    userid: chatLog.userId,\n                    username: chatLog.userName,\n                    time: chatLog.time,\n                    msg: chatLog.content,\n                    useravatar: chatLog.userAvatar,\n                    userRole: chatLog.userRole,\n                    usercustommark: chatLog.userCustomMark\n                });\n\n                if (!callback.chatLogs.length) {\n                    break;\n                }\n\n                chatLog = callback.chatLogs[0];\n            }\n        }, 1000);\n\n        // 同时开始实时显示广播\n        setInterval(function () {\n            var ft = 0;\n            try {\n                ft = callback.callbackPlayer.getPlayerTime();\n            } catch (e) {\n            }\n            if (ft <= 0) {\n                return;\n            }\n\n            if (!callback.broadcasts.length) {\n                return;\n            }\n\n            var broadcast = callback.broadcasts[0];\n            while (broadcast.time <= ft) {\n                broadcast = callback.broadcasts.shift();\n\n                callback.broadcastCache.push({\n                    content: broadcast.content,\n                    time: broadcast.time\n                });\n\n                if (!callback.broadcasts.length) {\n                    break;\n                }\n\n                broadcast = callback.broadcasts[0];\n            }\n        }, 1000);\n\n        if (typeof window.on_cc_live_player_load === 'function') {\n            window.on_cc_live_player_load();\n        }\n    };\n\n    function cc_live_callback_chat_interval() {\n        setInterval(function () {\n            var ft = 0;\n            try {\n                ft = parseInt($('#playbackVideo')[0].currentTime, 10);\n            } catch (e) {\n            }\n            if (ft <= 0) {\n                return;\n            }\n\n            if (!window.CHATLOGS.length) {\n                return;\n            }\n\n            var chatLog = window.CHATLOGS[0];\n\n            while (chatLog.time <= ft) {\n                var cl = window.CHATLOGS.shift();\n                callback.chatMessageCache.push({\n                    userid: cl.userId,\n                    username: cl.userName,\n                    time: cl.time,\n                    msg: cl.content,\n                    useravatar: cl.userAvatar,\n                    userRole: cl.userRole,\n                    usercustommark: cl.userCustomMark\n                });\n                if (!window.CHATLOGS.length) {\n                    break;\n                }\n                chatLog = window.CHATLOGS[0];\n            }\n\n        }, 1000);\n    }\n\n    function cc_live_callback_broadcasts_interval() {\n        setInterval(function () {\n            var ft = 0;\n            try {\n                ft = parseInt($('#playbackVideo')[0].currentTime, 10);\n            } catch (e) {\n            }\n            if (ft <= 0) {\n                return;\n            }\n\n            //广播\n            if (!window.BROADCASTS.length) {\n                return;\n            }\n\n            var broadcast = window.BROADCASTS[0];\n\n            while (broadcast.time <= ft) {\n                var bc = window.BROADCASTS.shift();\n                callback.broadcastCache.push({\n                    content: bc.content,\n                    time: bc.time\n                });\n\n                if (!window.BROADCASTS.length) {\n                    break;\n                }\n                broadcast = window.BROADCASTS[0];\n            }\n\n        }, 1000);\n    }\n\n    // 画板Flash加载完成回调\n    //window.on_drampanel_ready = function () {\n    //    callback.drawPanel.isReady = true;\n    //\n    //    setTimeout(function () {\n    //        initDrawPanelInfo();\n    //    }, 1500);\n    //};\n\n    window.seekStart = function () {\n        clearInterval(callback.drawPanel.intervalNum);\n    };\n\n    // 拖动时间轴或跳动播放成功后回调函数\n    window.seekComplete = function () {\n        callback.drawPanel.clear();\n        //clearInterval(callback.drawPanel.intervalNum);\n\n        var ft = callback.callbackPlayer.getPlayerTime();\n        if (ft < 0) {\n            ft = 0;\n        }\n\n        callback.pageChangeIndex = -1;\n        callback.drawIndex = -1;\n        callback.animationIndex = -1;\n\n        var meta = {\n            pageChange: [],\n            animation: [],\n            draw: []\n        };\n\n        if (callback.pageChanges && callback.pageChanges.length > 0) {\n            for (var i = 0; i < callback.pageChanges.length; i++) {\n                var pc = callback.pageChanges[i];\n                if (ft >= pc.time) {\n                    callback.pageChangeIndex = i;\n                }\n            }\n\n            if (callback.pageChangeIndex >= 0) {\n                var pc = callback.pageChanges[callback.pageChangeIndex];\n                if (typeof window.on_cc_callback_page_change === 'function') {\n                    window.on_cc_callback_page_change(pc);\n                }\n                callback.drawPanel.filp(JSON.stringify({\n                    'fileName': pc.docName,\n                    'totalPage': pc.docTotalPage,\n                    'docid': pc.encryptDocId,\n                    'url': pc.url,\n                    'page': pc.pageNum,\n                    'useSDK': pc.useSDK\n                }));\n\n                meta.pageChange.push(pc);\n            }\n        }\n\n        if (callback.animations && callback.animations.length > 0) {\n            for (var i = 0; i < callback.animations.length; i++) {\n                var a = callback.animations[i];\n                if (ft >= a.time) {\n                    callback.animationIndex = i;\n                }\n            }\n\n            if (callback.animationIndex >= 0) {\n                var pidex = callback.pageChangeIndex;\n                if (pidex >= 0) {\n                    var pc = callback.pageChanges[pidex];\n                    var a = callback.animations[callback.animationIndex];\n\n                    if (!!pc && !!a && pc.encryptDocId == a.encryptDocId && ft >= a.time && pc.time <= a.time) {\n                        callback.drawPanel.animation(JSON.stringify({\n                            'fileName': a.docName,\n                            'totalPage': a.docTotalPage,\n                            'docid': a.encryptDocId,\n                            'url': a.url,\n                            'page': a.pageNum,\n                            'step': a.step\n                        }));\n\n                        meta.animation.push(a);\n\n                    }\n                }\n            }\n        }\n\n        if (callback.draws && callback.draws.length > 0) {\n            for (var i = 0; i < callback.draws.length; i++) {\n                var dc = callback.draws[i];\n                if (ft >= dc.time) {\n                    //callback.drawPanel.draw(dc.data);\n                    callback.drawIndex = i;\n                }\n            }\n\n            var ds = callback.draws.slice(0, (callback.drawIndex + 1));\n            if (ds.length > 0) {\n                var dcdatas = [];\n                for (var i = 0; i < ds.length; i++) {\n                    var dc = ds[i];\n                    dcdatas.push(dc.data);\n                    meta.draw.push(dc);\n                }\n                callback.drawPanel.draws(dcdatas);\n            }\n        }\n\n        DWDpc.history(meta);\n\n        callback.drawPanel.intervalNum = setInterval(function () {\n            callback.drawPanel.interval();\n        }, 1000);\n    };\n\n    //事件兼容处理\n    var Event = {};\n    Event.addEvents = function (target, eventType, handle) {\n        if (document.addEventListener) {\n            Event.addEvents = function (target, eventType, handle) {\n                target.addEventListener(eventType, handle, false);\n            };\n        } else {\n            Event.addEvents = function (target, eventType, handle) {\n                target.attachEvent('on' + eventType, function () {\n                    handle.call(target, arguments);\n                });\n            };\n        }\n        ;\n        Event.addEvents(target, eventType, handle);\n    };\n\n    //video兼容处理\n    function checkVideo() {\n        if (!!document.createElement('video').canPlayType) {\n            var vidTest = document.createElement('video');\n            oggTest = vidTest.canPlayType('video/ogg; codecs=\"theora, vorbis\"');\n            if (!oggTest) {\n                h264Test = vidTest.canPlayType('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"');\n                if (!h264Test) {\n                    return false;\n                }\n                else {\n                    if (h264Test == 'probably') {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n            }\n            else {\n                if (oggTest == 'probably') {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n        else {\n            return false;\n        }\n    }\n\n\n    var MobileLive = {\n        pauseState: false,\n        init: function (opts) {\n            var _this = this;\n            $.ajax({\n                url: '//view.csslcloud.net/api/vod/play/mobile',\n                type: 'GET',\n                dataType: 'jsonp',\n                data: {userid: opts.userId, videoid: opts.videoId},\n                success: function (data) {\n                    var pvdefault = data.video[0];\n\n                    var playurl = pvdefault.playurl;\n                    var secureplayurl = pvdefault.secureplayurl;\n\n                    var isHttps = window.location.protocol === 'https:';\n                    if (isHttps && !!secureplayurl) {\n                        playurl = secureplayurl;\n                    }\n\n                    _this.appendVideo(playurl, opts);\n                }\n            });\n        },\n\n        appendVideo: function (s, opts) {\n            var _this = this;\n\n            var v = '<video id=\"playbackVideo\" webkit-playsinline playsinline controls autoplay x-webkit-airplay=\"deny\" x5-playsinline width=\"100%\" height=\"100%\" src=\"' + s + '\"></video>';\n            $('#' + playbackPlayer.id).html(v);\n            var video = document.getElementById('playbackVideo');\n            if (opts.isShowBar) {\n                video.removeAttribute('controls');\n            }\n\n            var isMobie = 0;\n            var ua = 1;\n            if (MobileLive.isMobile() == 'isMobile') {\n                isMobie = 1;\n                ua = 11;\n            }\n            var report = new ReportLog(opts, isMobie, ua, video, false);\n            if (!this.isAndroid()) {\n                this.pauseState = true;\n            }\n\n            Event.addEvents(video, 'canplay', function () {\n                if (MobileLive.isMobile() == 'isMobile') {\n                    window.on_cc_live_player_load && window.on_cc_live_player_load();\n                    window.on_cc_h5_player_load && window.on_cc_h5_player_load();\n                } else if (DW.isH5play) {\n                    window.on_cc_live_player_init && window.on_cc_live_player_init();\n                }\n            }, false);\n\n            Event.addEvents(video, 'playing', function () {\n                _this.pauseState = false;\n                window.on_player_start && on_player_start();\n                window.on_spark_player_resume && on_spark_player_resume();\n            }, false);\n\n            Event.addEvents(video, 'pause', function () {\n                _this.pauseState = true;\n                window.on_spark_player_pause && on_spark_player_pause();\n            }, false);\n\n            Event.addEvents(video, 'ended', function () {\n                window.on_spark_player_end && on_spark_player_end();\n            }, false);\n\n            Event.addEvents(video, 'seeking', function () {\n                seekStart && seekStart();\n            }, false);\n\n            Event.addEvents(video, 'seeked', function () {\n                seekComplete && seekComplete();\n            }, false);\n        },\n\n        getDuration: function () {\n            var v = document.getElementById('playbackVideo');\n            if (!v) {\n                return;\n            }\n            return Math.floor(v.duration);\n        },\n\n        getPlayerTime: function () {\n            var v = document.getElementById('playbackVideo');\n            if (!v) {\n                return;\n            }\n            return Math.floor(v.currentTime);\n        },\n\n        end: function () {\n            $('#' + playbackPlayer.id).html('end');\n        },\n\n        appendDoc: function (s) {\n            var img = '<img src=\"' + s + '\" />';\n            $('#' + playbackPanel.id).append(img);\n        },\n\n        isMobile: function () {\n            if (this.isIPad() || this.isIPhone() || this.isAndroid() || this.isWindowsPhone()) {\n                return 'isMobile';\n            }\n        },\n\n        isIPad: function () {\n            return navigator.userAgent.match(/iPad/i) != null;\n        },\n\n        isIPhone: function () {\n            return navigator.userAgent.match(/iPhone/i) != null;\n        },\n\n        isAndroid: function () {\n            return navigator.userAgent.match(/Android/i) != null;\n        },\n\n        isWindowsPhone: function () {\n            return navigator.userAgent.match(/Windows Phone/i) != null;\n        }\n\n    };\n\n\n})(jQuery, window, document, undefined);\n\n\n// WEBPACK FOOTER //\n// ./js/playbackSDK.js"],"sourceRoot":""}